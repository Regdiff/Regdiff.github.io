<!DOCTYPE html><html><head><meta name="author" content="Circle 阅读助手" /><meta name="description" content="由 [Circle 阅读助手](https://circlereader.com) 生成" /><link rel="shortcut icon" type="image/x-icon" href="https://static.zhihu.com/heifetz/favicon.ico"  /><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><style>html,body{padding:0;margin:0;}.card{min-height:100vh;}.container .ant-app{padding-right: 0 !important;}
.anticon {
  display: inline-flex;
  alignItems: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
.css-16cpc8y a{color:#416ed2;text-decoration:none;background-color:transparent;outline:none;cursor:pointer;transition:color 0.3s;-webkit-text-decoration-skip:objects;}.css-16cpc8y a:hover{color:#305ab7;}.css-16cpc8y a:active{color:#305ab7;}.css-16cpc8y a:active,.css-16cpc8y a:hover{text-decoration:none;outline:0;}.css-16cpc8y a:focus{text-decoration:none;outline:0;}.css-16cpc8y a[disabled]{color:rgba(0, 0, 0, 0.25);cursor:not-allowed;}.css-16cpc8y[class^="ant-avatar"],.css-16cpc8y[class*=" ant-avatar"]{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,'Noto Sans',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol','Noto Color Emoji';font-size:14px;box-sizing:border-box;}.css-16cpc8y[class^="ant-avatar"]::before,.css-16cpc8y[class*=" ant-avatar"]::before,.css-16cpc8y[class^="ant-avatar"]::after,.css-16cpc8y[class*=" ant-avatar"]::after{box-sizing:border-box;}.css-16cpc8y[class^="ant-avatar"] [class^="ant-avatar"],.css-16cpc8y[class*=" ant-avatar"] [class^="ant-avatar"],.css-16cpc8y[class^="ant-avatar"] [class*=" ant-avatar"],.css-16cpc8y[class*=" ant-avatar"] [class*=" ant-avatar"]{box-sizing:border-box;}.css-16cpc8y[class^="ant-avatar"] [class^="ant-avatar"]::before,.css-16cpc8y[class*=" ant-avatar"] [class^="ant-avatar"]::before,.css-16cpc8y[class^="ant-avatar"] [class*=" ant-avatar"]::before,.css-16cpc8y[class*=" ant-avatar"] [class*=" ant-avatar"]::before,.css-16cpc8y[class^="ant-avatar"] [class^="ant-avatar"]::after,.css-16cpc8y[class*=" ant-avatar"] [class^="ant-avatar"]::after,.css-16cpc8y[class^="ant-avatar"] [class*=" ant-avatar"]::after,.css-16cpc8y[class*=" ant-avatar"] [class*=" ant-avatar"]::after{box-sizing:border-box;}.css-16cpc8y.ant-avatar{box-sizing:border-box;margin:0;padding:0;color:#fff;font-size:14px;line-height:1.5714285714285714;list-style:none;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,'Noto Sans',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol','Noto Color Emoji';position:relative;display:inline-flex;justify-content:center;align-items:center;overflow:hidden;white-space:nowrap;text-align:center;vertical-align:middle;background:rgb(127,127,127);border:1px solid transparent;width:32px;height:32px;border-radius:50%;}.css-16cpc8y.ant-avatar-image{background:transparent;}.css-16cpc8y.ant-avatar .ant-image-img{display:block;}.css-16cpc8y.ant-avatar.ant-avatar-square{border-radius:6px;}.css-16cpc8y.ant-avatar.ant-avatar-icon{font-size:18px;}.css-16cpc8y.ant-avatar.ant-avatar-icon >.anticon{margin:0;}.css-16cpc8y.ant-avatar-lg{width:40px;height:40px;border-radius:50%;}.css-16cpc8y.ant-avatar-lg.ant-avatar-square{border-radius:8px;}.css-16cpc8y.ant-avatar-lg.ant-avatar-icon{font-size:24px;}.css-16cpc8y.ant-avatar-lg.ant-avatar-icon >.anticon{margin:0;}.css-16cpc8y.ant-avatar-sm{width:24px;height:24px;border-radius:50%;}.css-16cpc8y.ant-avatar-sm.ant-avatar-square{border-radius:4px;}.css-16cpc8y.ant-avatar-sm.ant-avatar-icon{font-size:14px;}.css-16cpc8y.ant-avatar-sm.ant-avatar-icon >.anticon{margin:0;}.css-16cpc8y.ant-avatar >img{display:block;width:100%;height:100%;object-fit:cover;}.css-16cpc8y.ant-avatar-group{display:inline-flex;}.css-16cpc8y.ant-avatar-group .ant-avatar{border-color:#ffffff;}.css-16cpc8y.ant-avatar-group >*:not(:first-child){margin-left:-8px;}.css-16cpc8y.ant-avatar-group-popover .ant-avatar+.ant-avatar{margin-left:4px;}.css-16cpc8y.ant-wave{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,'Noto Sans',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol','Noto Color Emoji';font-size:14px;box-sizing:border-box;}.css-16cpc8y.ant-wave::before,.css-16cpc8y.ant-wave::after{box-sizing:border-box;}.css-16cpc8y.ant-wave [class^="ant-wave"],.css-16cpc8y.ant-wave [class*=" ant-wave"]{box-sizing:border-box;}.css-16cpc8y.ant-wave [class^="ant-wave"]::before,.css-16cpc8y.ant-wave [class*=" ant-wave"]::before,.css-16cpc8y.ant-wave [class^="ant-wave"]::after,.css-16cpc8y.ant-wave [class*=" ant-wave"]::after{box-sizing:border-box;}.css-16cpc8y.ant-wave{position:absolute;background:transparent;pointer-events:none;box-sizing:border-box;color:var(--wave-color, #416ed2);box-shadow:0 0 0 0 currentcolor;opacity:0.2;}.css-16cpc8y.ant-wave.wave-motion-appear{transition:box-shadow 0.4s cubic-bezier(0.08, 0.82, 0.17, 1),opacity 2s cubic-bezier(0.08, 0.82, 0.17, 1);}.css-16cpc8y.ant-wave.wave-motion-appear-active{box-shadow:0 0 0 6px currentcolor;opacity:0;}.css-16cpc8y.ant-wave.wave-motion-appear.wave-quick{transition:box-shadow 0.3s cubic-bezier(0.645, 0.045, 0.355, 1),opacity 0.35s cubic-bezier(0.645, 0.045, 0.355, 1);}.css-16cpc8y.ant-tag{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,'Noto Sans',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol','Noto Color Emoji';font-size:14px;box-sizing:border-box;}.css-16cpc8y.ant-tag::before,.css-16cpc8y.ant-tag::after{box-sizing:border-box;}.css-16cpc8y.ant-tag [class^="ant-tag"],.css-16cpc8y.ant-tag [class*=" ant-tag"]{box-sizing:border-box;}.css-16cpc8y.ant-tag [class^="ant-tag"]::before,.css-16cpc8y.ant-tag [class*=" ant-tag"]::before,.css-16cpc8y.ant-tag [class^="ant-tag"]::after,.css-16cpc8y.ant-tag [class*=" ant-tag"]::after{box-sizing:border-box;}.css-16cpc8y.ant-tag{box-sizing:border-box;margin:0;padding:0;color:#1b1b1b;font-size:12px;line-height:20px;list-style:none;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,'Noto Sans',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol','Noto Color Emoji';display:inline-block;height:auto;margin-right:8px;padding-left:7px;padding-right:7px;white-space:nowrap;background:#fafafa;border:1px solid rgba(237,237,237, 0.6);border-radius:4px;opacity:1;transition:all 0.2s;text-align:start;position:relative;}.css-16cpc8y.ant-tag.ant-tag-rtl{direction:rtl;}.css-16cpc8y.ant-tag,.css-16cpc8y.ant-tag a,.css-16cpc8y.ant-tag a:hover{color:#1b1b1b;}.css-16cpc8y.ant-tag .ant-tag-close-icon{margin-left:3px;font-size:10px;color:rgb(57,57,57);cursor:pointer;transition:all 0.2s;}.css-16cpc8y.ant-tag .ant-tag-close-icon:hover{color:#1b1b1b;}.css-16cpc8y.ant-tag.ant-tag-has-color{border-color:transparent;}.css-16cpc8y.ant-tag.ant-tag-has-color,.css-16cpc8y.ant-tag.ant-tag-has-color a,.css-16cpc8y.ant-tag.ant-tag-has-color a:hover,.css-16cpc8y.ant-tag.ant-tag-has-color .anticon-close,.css-16cpc8y.ant-tag.ant-tag-has-color .anticon-close:hover{color:#fff;}.css-16cpc8y.ant-tag-checkable{background-color:transparent;border-color:transparent;cursor:pointer;}.css-16cpc8y.ant-tag-checkable:not(.ant-tag-checkable-checked):hover{color:#416ed2;background-color:rgba(0, 0, 0, 0.06);}.css-16cpc8y.ant-tag-checkable:active,.css-16cpc8y.ant-tag-checkable-checked{color:#fff;}.css-16cpc8y.ant-tag-checkable-checked{background-color:#416ed2;}.css-16cpc8y.ant-tag-checkable-checked:hover{background-color:#6891de;}.css-16cpc8y.ant-tag-checkable:active{background-color:#2c50ab;}.css-16cpc8y.ant-tag-hidden{display:none;}.css-16cpc8y.ant-tag >.anticon+span,.css-16cpc8y.ant-tag >span+.anticon{margin-left:7px;}.css-16cpc8y.ant-tag-borderless{border-color:transparent;background:#fafafa;}.css-16cpc8y.ant-space{display:inline-flex;}.css-16cpc8y.ant-space-rtl{direction:rtl;}.css-16cpc8y.ant-space-vertical{flex-direction:column;}.css-16cpc8y.ant-space-align{flex-direction:column;}.css-16cpc8y.ant-space-align-center{align-items:center;}.css-16cpc8y.ant-space-align-start{align-items:flex-start;}.css-16cpc8y.ant-space-align-end{align-items:flex-end;}.css-16cpc8y.ant-space-align-baseline{align-items:baseline;}.css-16cpc8y.ant-space .ant-space-item:empty{display:none;}.css-16cpc8y.ant-space .ant-space-item>.ant-badge-not-a-wrapper:only-child{display:block;}.css-16cpc8y.ant-space-gap-row-small{row-gap:8px;}.css-16cpc8y.ant-space-gap-row-middle{row-gap:16px;}.css-16cpc8y.ant-space-gap-row-large{row-gap:24px;}.css-16cpc8y.ant-space-gap-col-small{column-gap:8px;}.css-16cpc8y.ant-space-gap-col-middle{column-gap:16px;}.css-16cpc8y.ant-space-gap-col-large{column-gap:24px;}.css-16cpc8y.ant-space-block{display:flex;width:100%;}.css-16cpc8y.ant-space-vertical{flex-direction:column;}.css-16cpc8y.ant-btn{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,'Noto Sans',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol','Noto Color Emoji';font-size:14px;box-sizing:border-box;}.css-16cpc8y.ant-btn::before,.css-16cpc8y.ant-btn::after{box-sizing:border-box;}.css-16cpc8y.ant-btn [class^="ant-btn"],.css-16cpc8y.ant-btn [class*=" ant-btn"]{box-sizing:border-box;}.css-16cpc8y.ant-btn [class^="ant-btn"]::before,.css-16cpc8y.ant-btn [class*=" ant-btn"]::before,.css-16cpc8y.ant-btn [class^="ant-btn"]::after,.css-16cpc8y.ant-btn [class*=" ant-btn"]::after{box-sizing:border-box;}.css-16cpc8y.ant-btn{outline:none;position:relative;display:inline-block;font-weight:400;white-space:nowrap;text-align:center;background-image:none;background:transparent;border:1px solid transparent;cursor:pointer;transition:all 0.2s cubic-bezier(0.645, 0.045, 0.355, 1);user-select:none;touch-action:manipulation;color:#1b1b1b;}.css-16cpc8y.ant-btn:disabled>*{pointer-events:none;}.css-16cpc8y.ant-btn >span{display:inline-block;}.css-16cpc8y.ant-btn .ant-btn-icon{line-height:0;}.css-16cpc8y.ant-btn >.anticon+span,.css-16cpc8y.ant-btn >span+.anticon{margin-left:8px;}.css-16cpc8y.ant-btn:not(.ant-btn-icon-only)>.ant-btn-icon.ant-btn-loading-icon,.css-16cpc8y.ant-btn:not(.ant-btn-icon-only)>.ant-btn-icon:not(:last-child){margin-right:8px;}.css-16cpc8y.ant-btn >a{color:currentColor;}.css-16cpc8y.ant-btn:not(:disabled):focus-visible{outline:4px solid #c3d9f7;outline-offset:1px;transition:outline-offset 0s,outline 0s;}.css-16cpc8y.ant-btn.ant-btn-two-chinese-chars::first-letter{letter-spacing:0.34em;}.css-16cpc8y.ant-btn.ant-btn-two-chinese-chars>*:not(.anticon){margin-right:-0.34em;letter-spacing:0.34em;}.css-16cpc8y.ant-btn-icon-only.ant-btn-compact-item{flex:none;}.css-16cpc8y.ant-btn{font-size:14px;line-height:1.5714285714285714;height:32px;padding:4px 15px;border-radius:6px;}.css-16cpc8y.ant-btn.ant-btn-icon-only{width:32px;padding-left:0;padding-right:0;}.css-16cpc8y.ant-btn.ant-btn-icon-only.ant-btn-round{width:auto;}.css-16cpc8y.ant-btn.ant-btn-icon-only .anticon{font-size:16px;}.css-16cpc8y.ant-btn.ant-btn-loading{opacity:0.65;cursor:default;}.css-16cpc8y.ant-btn .ant-btn-loading-icon{transition:width 0.3s cubic-bezier(0.645, 0.045, 0.355, 1),opacity 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);}.css-16cpc8y.ant-btn.ant-btn-circle.ant-btn{min-width:32px;padding-left:0;padding-right:0;border-radius:50%;}.css-16cpc8y.ant-btn.ant-btn-round.ant-btn{border-radius:32px;padding-left:16px;padding-right:16px;}.css-16cpc8y.ant-btn-sm{font-size:14px;line-height:1.5714285714285714;height:24px;padding:0px 7px;border-radius:4px;}.css-16cpc8y.ant-btn-sm.ant-btn-icon-only{width:24px;padding-left:0;padding-right:0;}.css-16cpc8y.ant-btn-sm.ant-btn-icon-only.ant-btn-round{width:auto;}.css-16cpc8y.ant-btn-sm.ant-btn-icon-only .anticon{font-size:14px;}.css-16cpc8y.ant-btn-sm.ant-btn-loading{opacity:0.65;cursor:default;}.css-16cpc8y.ant-btn-sm .ant-btn-loading-icon{transition:width 0.3s cubic-bezier(0.645, 0.045, 0.355, 1),opacity 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);}.css-16cpc8y.ant-btn.ant-btn-circle.ant-btn-sm{min-width:24px;padding-left:0;padding-right:0;border-radius:50%;}.css-16cpc8y.ant-btn.ant-btn-round.ant-btn-sm{border-radius:24px;padding-left:12px;padding-right:12px;}.css-16cpc8y.ant-btn-lg{font-size:16px;line-height:1.5;height:40px;padding:7px 15px;border-radius:8px;}.css-16cpc8y.ant-btn-lg.ant-btn-icon-only{width:40px;padding-left:0;padding-right:0;}.css-16cpc8y.ant-btn-lg.ant-btn-icon-only.ant-btn-round{width:auto;}.css-16cpc8y.ant-btn-lg.ant-btn-icon-only .anticon{font-size:18px;}.css-16cpc8y.ant-btn-lg.ant-btn-loading{opacity:0.65;cursor:default;}.css-16cpc8y.ant-btn-lg .ant-btn-loading-icon{transition:width 0.3s cubic-bezier(0.645, 0.045, 0.355, 1),opacity 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);}.css-16cpc8y.ant-btn.ant-btn-circle.ant-btn-lg{min-width:40px;padding-left:0;padding-right:0;border-radius:50%;}.css-16cpc8y.ant-btn.ant-btn-round.ant-btn-lg{border-radius:40px;padding-left:20px;padding-right:20px;}.css-16cpc8y.ant-btn.ant-btn-block{width:100%;}.css-16cpc8y.ant-btn-default{background:#ffffff;border-color:rgba(237,237,237, 0.6);color:#1b1b1b;box-shadow:0 2px 0 rgba(0, 0, 0, 0.02);}.css-16cpc8y.ant-btn-default:disabled,.css-16cpc8y.ant-btn-default.ant-btn-disabled{cursor:not-allowed;border-color:rgba(237,237,237, 0.6);color:rgba(0, 0, 0, 0.25);background:rgba(0, 0, 0, 0.04);box-shadow:none;}.css-16cpc8y.ant-btn-default:not(:disabled):not(.ant-btn-disabled):hover{color:#6891de;border-color:#6891de;background:#ffffff;}.css-16cpc8y.ant-btn-default:not(:disabled):not(.ant-btn-disabled):active{color:#2c50ab;border-color:#2c50ab;background:#ffffff;}.css-16cpc8y.ant-btn-default.ant-btn-background-ghost{color:#ffffff;background:transparent;border-color:#ffffff;box-shadow:none;}.css-16cpc8y.ant-btn-default.ant-btn-background-ghost:not(:disabled):not(.ant-btn-disabled):hover{background:transparent;}.css-16cpc8y.ant-btn-default.ant-btn-background-ghost:not(:disabled):not(.ant-btn-disabled):active{background:transparent;}.css-16cpc8y.ant-btn-default.ant-btn-background-ghost:disabled{cursor:not-allowed;color:rgba(0, 0, 0, 0.25);border-color:rgba(237,237,237, 0.6);}.css-16cpc8y.ant-btn-default.ant-btn-dangerous{color:#ff4d4f;border-color:#ff4d4f;}.css-16cpc8y.ant-btn-default.ant-btn-dangerous:not(:disabled):not(.ant-btn-disabled):hover{color:#ff7875;border-color:#ffa39e;}.css-16cpc8y.ant-btn-default.ant-btn-dangerous:not(:disabled):not(.ant-btn-disabled):active{color:#d9363e;border-color:#d9363e;}.css-16cpc8y.ant-btn-default.ant-btn-dangerous.ant-btn-background-ghost{color:#ff4d4f;background:transparent;border-color:#ff4d4f;box-shadow:none;}.css-16cpc8y.ant-btn-default.ant-btn-dangerous.ant-btn-background-ghost:not(:disabled):not(.ant-btn-disabled):hover{background:transparent;}.css-16cpc8y.ant-btn-default.ant-btn-dangerous.ant-btn-background-ghost:not(:disabled):not(.ant-btn-disabled):active{background:transparent;}.css-16cpc8y.ant-btn-default.ant-btn-dangerous.ant-btn-background-ghost:disabled{cursor:not-allowed;color:rgba(0, 0, 0, 0.25);border-color:rgba(237,237,237, 0.6);}.css-16cpc8y.ant-btn-default.ant-btn-dangerous:disabled,.css-16cpc8y.ant-btn-default.ant-btn-dangerous.ant-btn-disabled{cursor:not-allowed;border-color:rgba(237,237,237, 0.6);color:rgba(0, 0, 0, 0.25);background:rgba(0, 0, 0, 0.04);box-shadow:none;}.css-16cpc8y.ant-btn-primary{color:#fff;background:#416ed2;box-shadow:0 2px 0 rgba(5, 122, 255, 0.06);}.css-16cpc8y.ant-btn-primary:disabled,.css-16cpc8y.ant-btn-primary.ant-btn-disabled{cursor:not-allowed;border-color:rgba(237,237,237, 0.6);color:rgba(0, 0, 0, 0.25);background:rgba(0, 0, 0, 0.04);box-shadow:none;}.css-16cpc8y.ant-btn-primary:not(:disabled):not(.ant-btn-disabled):hover{color:#fff;background:#6891de;}.css-16cpc8y.ant-btn-primary:not(:disabled):not(.ant-btn-disabled):active{color:#fff;background:#2c50ab;}.css-16cpc8y.ant-btn-primary.ant-btn-background-ghost{color:#416ed2;background:transparent;border-color:#416ed2;box-shadow:none;}.css-16cpc8y.ant-btn-primary.ant-btn-background-ghost:not(:disabled):not(.ant-btn-disabled):hover{background:transparent;color:#6891de;border-color:#6891de;}.css-16cpc8y.ant-btn-primary.ant-btn-background-ghost:not(:disabled):not(.ant-btn-disabled):active{background:transparent;color:#2c50ab;border-color:#2c50ab;}.css-16cpc8y.ant-btn-primary.ant-btn-background-ghost:disabled{cursor:not-allowed;color:rgba(0, 0, 0, 0.25);border-color:rgba(237,237,237, 0.6);}.css-16cpc8y.ant-btn-primary.ant-btn-dangerous{background:#ff4d4f;box-shadow:0 2px 0 rgba(255, 38, 5, 0.06);color:#fff;}.css-16cpc8y.ant-btn-primary.ant-btn-dangerous:not(:disabled):not(.ant-btn-disabled):hover{background:#ff7875;}.css-16cpc8y.ant-btn-primary.ant-btn-dangerous:not(:disabled):not(.ant-btn-disabled):active{background:#d9363e;}.css-16cpc8y.ant-btn-primary.ant-btn-dangerous.ant-btn-background-ghost{color:#ff4d4f;background:transparent;border-color:#ff4d4f;box-shadow:none;}.css-16cpc8y.ant-btn-primary.ant-btn-dangerous.ant-btn-background-ghost:not(:disabled):not(.ant-btn-disabled):hover{background:transparent;color:#ff7875;border-color:#ff7875;}.css-16cpc8y.ant-btn-primary.ant-btn-dangerous.ant-btn-background-ghost:not(:disabled):not(.ant-btn-disabled):active{background:transparent;color:#d9363e;border-color:#d9363e;}.css-16cpc8y.ant-btn-primary.ant-btn-dangerous.ant-btn-background-ghost:disabled{cursor:not-allowed;color:rgba(0, 0, 0, 0.25);border-color:rgba(237,237,237, 0.6);}.css-16cpc8y.ant-btn-primary.ant-btn-dangerous:disabled,.css-16cpc8y.ant-btn-primary.ant-btn-dangerous.ant-btn-disabled{cursor:not-allowed;border-color:rgba(237,237,237, 0.6);color:rgba(0, 0, 0, 0.25);background:rgba(0, 0, 0, 0.04);box-shadow:none;}.css-16cpc8y.ant-btn-dashed{background:#ffffff;border-color:rgba(237,237,237, 0.6);color:#1b1b1b;box-shadow:0 2px 0 rgba(0, 0, 0, 0.02);border-style:dashed;}.css-16cpc8y.ant-btn-dashed:disabled,.css-16cpc8y.ant-btn-dashed.ant-btn-disabled{cursor:not-allowed;border-color:rgba(237,237,237, 0.6);color:rgba(0, 0, 0, 0.25);background:rgba(0, 0, 0, 0.04);box-shadow:none;}.css-16cpc8y.ant-btn-dashed:not(:disabled):not(.ant-btn-disabled):hover{color:#6891de;border-color:#6891de;background:#ffffff;}.css-16cpc8y.ant-btn-dashed:not(:disabled):not(.ant-btn-disabled):active{color:#2c50ab;border-color:#2c50ab;background:#ffffff;}.css-16cpc8y.ant-btn-dashed.ant-btn-background-ghost{color:#ffffff;background:transparent;border-color:#ffffff;box-shadow:none;}.css-16cpc8y.ant-btn-dashed.ant-btn-background-ghost:not(:disabled):not(.ant-btn-disabled):hover{background:transparent;}.css-16cpc8y.ant-btn-dashed.ant-btn-background-ghost:not(:disabled):not(.ant-btn-disabled):active{background:transparent;}.css-16cpc8y.ant-btn-dashed.ant-btn-background-ghost:disabled{cursor:not-allowed;color:rgba(0, 0, 0, 0.25);border-color:rgba(237,237,237, 0.6);}.css-16cpc8y.ant-btn-dashed.ant-btn-dangerous{color:#ff4d4f;border-color:#ff4d4f;}.css-16cpc8y.ant-btn-dashed.ant-btn-dangerous:not(:disabled):not(.ant-btn-disabled):hover{color:#ff7875;border-color:#ffa39e;}.css-16cpc8y.ant-btn-dashed.ant-btn-dangerous:not(:disabled):not(.ant-btn-disabled):active{color:#d9363e;border-color:#d9363e;}.css-16cpc8y.ant-btn-dashed.ant-btn-dangerous.ant-btn-background-ghost{color:#ff4d4f;background:transparent;border-color:#ff4d4f;box-shadow:none;}.css-16cpc8y.ant-btn-dashed.ant-btn-dangerous.ant-btn-background-ghost:not(:disabled):not(.ant-btn-disabled):hover{background:transparent;}.css-16cpc8y.ant-btn-dashed.ant-btn-dangerous.ant-btn-background-ghost:not(:disabled):not(.ant-btn-disabled):active{background:transparent;}.css-16cpc8y.ant-btn-dashed.ant-btn-dangerous.ant-btn-background-ghost:disabled{cursor:not-allowed;color:rgba(0, 0, 0, 0.25);border-color:rgba(237,237,237, 0.6);}.css-16cpc8y.ant-btn-dashed.ant-btn-dangerous:disabled,.css-16cpc8y.ant-btn-dashed.ant-btn-dangerous.ant-btn-disabled{cursor:not-allowed;border-color:rgba(237,237,237, 0.6);color:rgba(0, 0, 0, 0.25);background:rgba(0, 0, 0, 0.04);box-shadow:none;}.css-16cpc8y.ant-btn-link{color:#416ed2;}.css-16cpc8y.ant-btn-link:not(:disabled):not(.ant-btn-disabled):hover{color:#305ab7;background:transparent;}.css-16cpc8y.ant-btn-link:not(:disabled):not(.ant-btn-disabled):active{color:#305ab7;}.css-16cpc8y.ant-btn-link:disabled,.css-16cpc8y.ant-btn-link.ant-btn-disabled{cursor:not-allowed;color:rgba(0, 0, 0, 0.25);}.css-16cpc8y.ant-btn-link.ant-btn-dangerous{color:#ff4d4f;}.css-16cpc8y.ant-btn-link.ant-btn-dangerous:not(:disabled):not(.ant-btn-disabled):hover{color:#ff7875;}.css-16cpc8y.ant-btn-link.ant-btn-dangerous:not(:disabled):not(.ant-btn-disabled):active{color:#d9363e;}.css-16cpc8y.ant-btn-link.ant-btn-dangerous:disabled,.css-16cpc8y.ant-btn-link.ant-btn-dangerous.ant-btn-disabled{cursor:not-allowed;color:rgba(0, 0, 0, 0.25);}.css-16cpc8y.ant-btn-text:not(:disabled):not(.ant-btn-disabled):hover{color:#1b1b1b;background:rgba(0, 0, 0, 0.06);}.css-16cpc8y.ant-btn-text:not(:disabled):not(.ant-btn-disabled):active{color:#1b1b1b;background:rgba(0, 0, 0, 0.15);}.css-16cpc8y.ant-btn-text:disabled,.css-16cpc8y.ant-btn-text.ant-btn-disabled{cursor:not-allowed;color:rgba(0, 0, 0, 0.25);}.css-16cpc8y.ant-btn-text.ant-btn-dangerous{color:#ff4d4f;}.css-16cpc8y.ant-btn-text.ant-btn-dangerous:disabled,.css-16cpc8y.ant-btn-text.ant-btn-dangerous.ant-btn-disabled{cursor:not-allowed;color:rgba(0, 0, 0, 0.25);}.css-16cpc8y.ant-btn-text.ant-btn-dangerous:not(:disabled):not(.ant-btn-disabled):hover{color:#ff7875;background:#fff2f0;}.css-16cpc8y.ant-btn-text.ant-btn-dangerous:not(:disabled):not(.ant-btn-disabled):active{color:#ff7875;background:#fff2f0;}.css-16cpc8y.ant-btn-ghost.ant-btn-background-ghost{color:#ffffff;background:transparent;border-color:#ffffff;box-shadow:none;}.css-16cpc8y.ant-btn-ghost.ant-btn-background-ghost:not(:disabled):not(.ant-btn-disabled):hover{background:transparent;}.css-16cpc8y.ant-btn-ghost.ant-btn-background-ghost:not(:disabled):not(.ant-btn-disabled):active{background:transparent;}.css-16cpc8y.ant-btn-ghost.ant-btn-background-ghost:disabled{cursor:not-allowed;color:rgba(0, 0, 0, 0.25);border-color:rgba(237,237,237, 0.6);}.css-16cpc8y.ant-btn-group{position:relative;display:inline-flex;}.css-16cpc8y.ant-btn-group >span:not(:last-child),.css-16cpc8y.ant-btn-group >.ant-btn:not(:last-child),.css-16cpc8y.ant-btn-group >span:not(:last-child)>.ant-btn,.css-16cpc8y.ant-btn-group >.ant-btn:not(:last-child)>.ant-btn{border-top-right-radius:0;border-bottom-right-radius:0;}.css-16cpc8y.ant-btn-group >span:not(:first-child),.css-16cpc8y.ant-btn-group >.ant-btn:not(:first-child){margin-left:-1px;}.css-16cpc8y.ant-btn-group >span:not(:first-child),.css-16cpc8y.ant-btn-group >.ant-btn:not(:first-child),.css-16cpc8y.ant-btn-group >span:not(:first-child)>.ant-btn,.css-16cpc8y.ant-btn-group >.ant-btn:not(:first-child)>.ant-btn{border-top-left-radius:0;border-bottom-left-radius:0;}.css-16cpc8y.ant-btn-group .ant-btn{position:relative;z-index:1;}.css-16cpc8y.ant-btn-group .ant-btn:hover,.css-16cpc8y.ant-btn-group .ant-btn:focus,.css-16cpc8y.ant-btn-group .ant-btn:active{z-index:2;}.css-16cpc8y.ant-btn-group .ant-btn[disabled]{z-index:0;}.css-16cpc8y.ant-btn-group .ant-btn-icon-only{font-size:14px;}.css-16cpc8y.ant-btn-group >span:not(:last-child):not(:disabled),.css-16cpc8y.ant-btn-group >.ant-btn-primary:not(:last-child):not(:disabled),.css-16cpc8y.ant-btn-group >span:not(:last-child)>.ant-btn-primary:not(:disabled),.css-16cpc8y.ant-btn-group >.ant-btn-primary:not(:last-child)>.ant-btn-primary:not(:disabled){border-right-color:#6891de;}.css-16cpc8y.ant-btn-group >span:not(:first-child):not(:disabled),.css-16cpc8y.ant-btn-group >.ant-btn-primary:not(:first-child):not(:disabled),.css-16cpc8y.ant-btn-group >span:not(:first-child)>.ant-btn-primary:not(:disabled),.css-16cpc8y.ant-btn-group >.ant-btn-primary:not(:first-child)>.ant-btn-primary:not(:disabled){border-left-color:#6891de;}.css-16cpc8y.ant-btn-group >span:not(:last-child):not(:disabled),.css-16cpc8y.ant-btn-group >.ant-btn-danger:not(:last-child):not(:disabled),.css-16cpc8y.ant-btn-group >span:not(:last-child)>.ant-btn-danger:not(:disabled),.css-16cpc8y.ant-btn-group >.ant-btn-danger:not(:last-child)>.ant-btn-danger:not(:disabled){border-right-color:#ff7875;}.css-16cpc8y.ant-btn-group >span:not(:first-child):not(:disabled),.css-16cpc8y.ant-btn-group >.ant-btn-danger:not(:first-child):not(:disabled),.css-16cpc8y.ant-btn-group >span:not(:first-child)>.ant-btn-danger:not(:disabled),.css-16cpc8y.ant-btn-group >.ant-btn-danger:not(:first-child)>.ant-btn-danger:not(:disabled){border-left-color:#ff7875;}.css-16cpc8y[class^="ant-modal"],.css-16cpc8y[class*=" ant-modal"]{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,'Noto Sans',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol','Noto Color Emoji';font-size:14px;box-sizing:border-box;}.css-16cpc8y[class^="ant-modal"]::before,.css-16cpc8y[class*=" ant-modal"]::before,.css-16cpc8y[class^="ant-modal"]::after,.css-16cpc8y[class*=" ant-modal"]::after{box-sizing:border-box;}.css-16cpc8y[class^="ant-modal"] [class^="ant-modal"],.css-16cpc8y[class*=" ant-modal"] [class^="ant-modal"],.css-16cpc8y[class^="ant-modal"] [class*=" ant-modal"],.css-16cpc8y[class*=" ant-modal"] [class*=" ant-modal"]{box-sizing:border-box;}.css-16cpc8y[class^="ant-modal"] [class^="ant-modal"]::before,.css-16cpc8y[class*=" ant-modal"] [class^="ant-modal"]::before,.css-16cpc8y[class^="ant-modal"] [class*=" ant-modal"]::before,.css-16cpc8y[class*=" ant-modal"] [class*=" ant-modal"]::before,.css-16cpc8y[class^="ant-modal"] [class^="ant-modal"]::after,.css-16cpc8y[class*=" ant-modal"] [class^="ant-modal"]::after,.css-16cpc8y[class^="ant-modal"] [class*=" ant-modal"]::after,.css-16cpc8y[class*=" ant-modal"] [class*=" ant-modal"]::after{box-sizing:border-box;}.css-16cpc8y.ant-modal-root .ant-modal-wrap-rtl{direction:rtl;}.css-16cpc8y.ant-modal-root .ant-modal-centered{text-align:center;}.css-16cpc8y.ant-modal-root .ant-modal-centered::before{display:inline-block;width:0;height:100%;vertical-align:middle;content:"";}.css-16cpc8y.ant-modal-root .ant-modal-centered .ant-modal{top:0;display:inline-block;padding-bottom:0;text-align:start;vertical-align:middle;}@media (max-width: 767px){.css-16cpc8y.ant-modal-root .ant-modal{max-width:calc(100vw - 16px);margin:8px auto;}.css-16cpc8y.ant-modal-root .ant-modal-centered .ant-modal{flex:1;}}.css-16cpc8y.ant-modal{box-sizing:border-box;margin:0 auto;padding:0;color:#1b1b1b;font-size:14px;line-height:1.5714285714285714;list-style:none;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,'Noto Sans',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol','Noto Color Emoji';pointer-events:none;position:relative;top:100px;width:auto;max-width:calc(100vw - 32px);padding-bottom:24px;}.css-16cpc8y.ant-modal .ant-modal-title{margin:0;color:#1b1b1b;font-weight:600;font-size:16px;line-height:1.5;word-wrap:break-word;}.css-16cpc8y.ant-modal .ant-modal-content{position:relative;background-color:#ffffff;background-clip:padding-box;border:0;border-radius:8px;box-shadow:0 6px 16px 0 rgba(0, 0, 0, 0.08),0 3px 6px -4px rgba(0, 0, 0, 0.12),0 9px 28px 8px rgba(0, 0, 0, 0.05);pointer-events:auto;padding:20px 24px;}.css-16cpc8y.ant-modal .ant-modal-close{position:absolute;top:12px;right:12px;z-index:1010;padding:0;color:rgb(57,57,57);font-weight:600;line-height:1;text-decoration:none;background:transparent;border-radius:4px;width:32px;height:32px;border:0;outline:0;cursor:pointer;transition:color 0.2s,background-color 0.2s;}.css-16cpc8y.ant-modal .ant-modal-close-x{display:flex;font-size:16px;font-style:normal;line-height:32px;justify-content:center;text-transform:none;text-rendering:auto;}.css-16cpc8y.ant-modal .ant-modal-close:hover{color:#1b1b1b;background-color:rgba(0, 0, 0, 0.06);text-decoration:none;}.css-16cpc8y.ant-modal .ant-modal-close:active{background-color:rgba(0, 0, 0, 0.15);}.css-16cpc8y.ant-modal .ant-modal-close:focus-visible{outline:4px solid #c3d9f7;outline-offset:1px;transition:outline-offset 0s,outline 0s;}.css-16cpc8y.ant-modal .ant-modal-header{color:#1b1b1b;background:#ffffff;border-radius:8px 8px 0 0;margin-bottom:8px;padding:0;border-bottom:none;}.css-16cpc8y.ant-modal .ant-modal-body{font-size:14px;line-height:1.5714285714285714;word-wrap:break-word;padding:0;}.css-16cpc8y.ant-modal .ant-modal-footer{text-align:end;background:transparent;margin-top:12px;padding:0;border-top:none;border-radius:0;}.css-16cpc8y.ant-modal .ant-modal-footer >.ant-btn+.ant-btn{margin-left:8px;}.css-16cpc8y.ant-modal .ant-modal-open{overflow:hidden;}.css-16cpc8y.ant-modal-pure-panel{top:auto;padding:0;display:flex;flex-direction:column;}.css-16cpc8y.ant-modal-pure-panel .ant-modal-content,.css-16cpc8y.ant-modal-pure-panel .ant-modal-body,.css-16cpc8y.ant-modal-pure-panel .ant-modal-confirm-body-wrapper{display:flex;flex-direction:column;flex:auto;}.css-16cpc8y.ant-modal-pure-panel .ant-modal-confirm-body{margin-bottom:auto;}.css-16cpc8y.ant-modal-root .ant-modal-wrap-rtl{direction:rtl;}.css-16cpc8y.ant-modal-root .ant-modal-wrap-rtl .ant-modal-confirm-body{direction:rtl;}.css-16cpc8y.ant-modal-root .ant-modal.ant-zoom-enter,.css-16cpc8y.ant-modal-root .ant-modal.ant-zoom-appear{transform:none;opacity:0;animation-duration:0.3s;user-select:none;}.css-16cpc8y.ant-modal-root .ant-modal.ant-zoom-leave .ant-modal-content{pointer-events:none;}.css-16cpc8y.ant-modal-root .ant-modal-mask{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1000;height:100%;background-color:rgba(0, 0, 0, 0.45);pointer-events:none;}.css-16cpc8y.ant-modal-root .ant-modal-mask .ant-modal-hidden{display:none;}.css-16cpc8y.ant-modal-root .ant-modal-wrap{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1000;overflow:auto;outline:0;-webkit-overflow-scrolling:touch;}.css-16cpc8y.ant-modal-root .ant-fade-enter,.css-16cpc8y.ant-modal-root .ant-fade-appear{animation-duration:0.2s;animation-fill-mode:both;animation-play-state:paused;}.css-16cpc8y.ant-modal-root .ant-fade-leave{animation-duration:0.2s;animation-fill-mode:both;animation-play-state:paused;}.css-16cpc8y.ant-modal-root .ant-fade-enter.ant-fade-enter-active,.css-16cpc8y.ant-modal-root .ant-fade-appear.ant-fade-appear-active{animation-name:css-16cpc8y-antFadeIn;animation-play-state:running;}.css-16cpc8y.ant-modal-root .ant-fade-leave.ant-fade-leave-active{animation-name:css-16cpc8y-antFadeOut;animation-play-state:running;pointer-events:none;}.css-16cpc8y.ant-modal-root .ant-fade-enter,.css-16cpc8y.ant-modal-root .ant-fade-appear{opacity:0;animation-timing-function:linear;}.css-16cpc8y.ant-modal-root .ant-fade-leave{animation-timing-function:linear;}.css-16cpc8y.ant-zoom-enter,.css-16cpc8y.ant-zoom-appear{animation-duration:0.2s;animation-fill-mode:both;animation-play-state:paused;}.css-16cpc8y.ant-zoom-leave{animation-duration:0.2s;animation-fill-mode:both;animation-play-state:paused;}.css-16cpc8y.ant-zoom-enter.ant-zoom-enter-active,.css-16cpc8y.ant-zoom-appear.ant-zoom-appear-active{animation-name:css-16cpc8y-antZoomIn;animation-play-state:running;}.css-16cpc8y.ant-zoom-leave.ant-zoom-leave-active{animation-name:css-16cpc8y-antZoomOut;animation-play-state:running;pointer-events:none;}.css-16cpc8y.ant-zoom-enter,.css-16cpc8y.ant-zoom-appear{transform:scale(0);opacity:0;animation-timing-function:cubic-bezier(0.08, 0.82, 0.17, 1);}.css-16cpc8y.ant-zoom-enter-prepare,.css-16cpc8y.ant-zoom-appear-prepare{transform:none;}.css-16cpc8y.ant-zoom-leave{animation-timing-function:cubic-bezier(0.78, 0.14, 0.15, 0.86);}@keyframes css-16cpc8y-antFadeIn{0%{opacity:0;}100%{opacity:1;}}@keyframes css-16cpc8y-antFadeOut{0%{opacity:1;}100%{opacity:0;}}@keyframes css-16cpc8y-antZoomIn{0%{transform:scale(0.2);opacity:0;}100%{transform:scale(1);opacity:1;}}@keyframes css-16cpc8y-antZoomOut{0%{transform:scale(1);}100%{transform:scale(0.2);opacity:0;}}.css-16cpc8y.ant-typography{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,'Noto Sans',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol','Noto Color Emoji';font-size:14px;box-sizing:border-box;}.css-16cpc8y.ant-typography::before,.css-16cpc8y.ant-typography::after{box-sizing:border-box;}.css-16cpc8y.ant-typography [class^="ant-typography"],.css-16cpc8y.ant-typography [class*=" ant-typography"]{box-sizing:border-box;}.css-16cpc8y.ant-typography [class^="ant-typography"]::before,.css-16cpc8y.ant-typography [class*=" ant-typography"]::before,.css-16cpc8y.ant-typography [class^="ant-typography"]::after,.css-16cpc8y.ant-typography [class*=" ant-typography"]::after{box-sizing:border-box;}.css-16cpc8y.ant-typography{color:#1b1b1b;word-break:break-word;line-height:1.5714285714285714;}.css-16cpc8y.ant-typography.ant-typography-secondary{color:rgb(57,57,57);}.css-16cpc8y.ant-typography.ant-typography-success{color:#52c41a;}.css-16cpc8y.ant-typography.ant-typography-warning{color:#faad14;}.css-16cpc8y.ant-typography.ant-typography-danger{color:#ff4d4f;}a.css-16cpc8y.ant-typography.ant-typography-danger:active,a.css-16cpc8y.ant-typography.ant-typography-danger:focus{color:#d9363e;}a.css-16cpc8y.ant-typography.ant-typography-danger:hover{color:#ff7875;}.css-16cpc8y.ant-typography.ant-typography-disabled{color:rgba(0, 0, 0, 0.25);cursor:not-allowed;user-select:none;}div.css-16cpc8y.ant-typography,.css-16cpc8y.ant-typography p{margin-bottom:1em;}h1.css-16cpc8y.ant-typography,div.css-16cpc8y.ant-typography-h1,div.css-16cpc8y.ant-typography-h1>textarea,.css-16cpc8y.ant-typography h1{margin-bottom:0.5em;color:#1b1b1b;font-weight:600;font-size:38px;line-height:1.2105263157894737;}h2.css-16cpc8y.ant-typography,div.css-16cpc8y.ant-typography-h2,div.css-16cpc8y.ant-typography-h2>textarea,.css-16cpc8y.ant-typography h2{margin-bottom:0.5em;color:#1b1b1b;font-weight:600;font-size:30px;line-height:1.2666666666666666;}h3.css-16cpc8y.ant-typography,div.css-16cpc8y.ant-typography-h3,div.css-16cpc8y.ant-typography-h3>textarea,.css-16cpc8y.ant-typography h3{margin-bottom:0.5em;color:#1b1b1b;font-weight:600;font-size:24px;line-height:1.3333333333333333;}h4.css-16cpc8y.ant-typography,div.css-16cpc8y.ant-typography-h4,div.css-16cpc8y.ant-typography-h4>textarea,.css-16cpc8y.ant-typography h4{margin-bottom:0.5em;color:#1b1b1b;font-weight:600;font-size:20px;line-height:1.4;}h5.css-16cpc8y.ant-typography,div.css-16cpc8y.ant-typography-h5,div.css-16cpc8y.ant-typography-h5>textarea,.css-16cpc8y.ant-typography h5{margin-bottom:0.5em;color:#1b1b1b;font-weight:600;font-size:16px;line-height:1.5;}.css-16cpc8y.ant-typography+h1.ant-typography,.css-16cpc8y.ant-typography+h2.ant-typography,.css-16cpc8y.ant-typography+h3.ant-typography,.css-16cpc8y.ant-typography+h4.ant-typography,.css-16cpc8y.ant-typography+h5.ant-typography{margin-top:1.2em;}.css-16cpc8y.ant-typography div +h1,.css-16cpc8y.ant-typography ul +h1,.css-16cpc8y.ant-typography li +h1,.css-16cpc8y.ant-typography p +h1,.css-16cpc8y.ant-typography h1 +h1,.css-16cpc8y.ant-typography h2 +h1,.css-16cpc8y.ant-typography h3 +h1,.css-16cpc8y.ant-typography h4 +h1,.css-16cpc8y.ant-typography h5 +h1,.css-16cpc8y.ant-typography div +h2,.css-16cpc8y.ant-typography ul +h2,.css-16cpc8y.ant-typography li +h2,.css-16cpc8y.ant-typography p +h2,.css-16cpc8y.ant-typography h1 +h2,.css-16cpc8y.ant-typography h2 +h2,.css-16cpc8y.ant-typography h3 +h2,.css-16cpc8y.ant-typography h4 +h2,.css-16cpc8y.ant-typography h5 +h2,.css-16cpc8y.ant-typography div +h3,.css-16cpc8y.ant-typography ul +h3,.css-16cpc8y.ant-typography li +h3,.css-16cpc8y.ant-typography p +h3,.css-16cpc8y.ant-typography h1 +h3,.css-16cpc8y.ant-typography h2 +h3,.css-16cpc8y.ant-typography h3 +h3,.css-16cpc8y.ant-typography h4 +h3,.css-16cpc8y.ant-typography h5 +h3,.css-16cpc8y.ant-typography div +h4,.css-16cpc8y.ant-typography ul +h4,.css-16cpc8y.ant-typography li +h4,.css-16cpc8y.ant-typography p +h4,.css-16cpc8y.ant-typography h1 +h4,.css-16cpc8y.ant-typography h2 +h4,.css-16cpc8y.ant-typography h3 +h4,.css-16cpc8y.ant-typography h4 +h4,.css-16cpc8y.ant-typography h5 +h4,.css-16cpc8y.ant-typography div +h5,.css-16cpc8y.ant-typography ul +h5,.css-16cpc8y.ant-typography li +h5,.css-16cpc8y.ant-typography p +h5,.css-16cpc8y.ant-typography h1 +h5,.css-16cpc8y.ant-typography h2 +h5,.css-16cpc8y.ant-typography h3 +h5,.css-16cpc8y.ant-typography h4 +h5,.css-16cpc8y.ant-typography h5 +h5{margin-top:1.2em;}.css-16cpc8y.ant-typography code{margin:0 0.2em;padding-left:0.4em;padding-right:0.4em;padding-top:0.2em;padding-bottom:0.1em;font-size:85%;font-family:'SFMono-Regular',Consolas,'Liberation Mono',Menlo,Courier,monospace;background:rgba(150, 150, 150, 0.1);border:1px solid rgba(100, 100, 100, 0.2);border-radius:3px;}.css-16cpc8y.ant-typography kbd{margin:0 0.2em;padding-left:0.4em;padding-right:0.4em;padding-top:0.15em;padding-bottom:0.1em;font-size:90%;font-family:'SFMono-Regular',Consolas,'Liberation Mono',Menlo,Courier,monospace;background:rgba(150, 150, 150, 0.06);border:1px solid rgba(100, 100, 100, 0.2);border-bottom-width:2px;border-radius:3px;}.css-16cpc8y.ant-typography mark{padding:0;background-color:#ffe58f;}.css-16cpc8y.ant-typography u,.css-16cpc8y.ant-typography ins{text-decoration:underline;text-decoration-skip-ink:auto;}.css-16cpc8y.ant-typography s,.css-16cpc8y.ant-typography del{text-decoration:line-through;}.css-16cpc8y.ant-typography strong{font-weight:600;}.css-16cpc8y.ant-typography ul,.css-16cpc8y.ant-typography ol{margin-left:0;margin-right:0;margin-top:0;margin-bottom:1em;padding:0;}.css-16cpc8y.ant-typography ul li,.css-16cpc8y.ant-typography ol li{margin-left:20px;margin-right:0;margin-top:0;margin-bottom:0;padding-left:4px;padding-right:0;padding-top:0;padding-bottom:0;}.css-16cpc8y.ant-typography ul{list-style-type:circle;}.css-16cpc8y.ant-typography ul ul{list-style-type:disc;}.css-16cpc8y.ant-typography ol{list-style-type:decimal;}.css-16cpc8y.ant-typography pre,.css-16cpc8y.ant-typography blockquote{margin:1em 0;}.css-16cpc8y.ant-typography pre{padding:0.4em 0.6em;white-space:pre-wrap;word-wrap:break-word;background:rgba(150, 150, 150, 0.1);border:1px solid rgba(100, 100, 100, 0.2);border-radius:3px;font-family:'SFMono-Regular',Consolas,'Liberation Mono',Menlo,Courier,monospace;}.css-16cpc8y.ant-typography pre code{display:inline;margin:0;padding:0;font-size:inherit;font-family:inherit;background:transparent;border:0;}.css-16cpc8y.ant-typography blockquote{padding-left:0.6em;padding-right:0;padding-top:0;padding-bottom:0;border-left:4px solid rgba(100, 100, 100, 0.2);opacity:0.85;}a.css-16cpc8y.ant-typography,.css-16cpc8y.ant-typography a{color:#416ed2;text-decoration:none;outline:none;cursor:pointer;transition:color 0.3s;}a.css-16cpc8y.ant-typography:focus,.css-16cpc8y.ant-typography a:focus,a.css-16cpc8y.ant-typography:hover,.css-16cpc8y.ant-typography a:hover{color:#305ab7;}a.css-16cpc8y.ant-typography:active,.css-16cpc8y.ant-typography a:active{color:#305ab7;}a.css-16cpc8y.ant-typography:active,.css-16cpc8y.ant-typography a:active,a.css-16cpc8y.ant-typography:hover,.css-16cpc8y.ant-typography a:hover{text-decoration:none;}a.css-16cpc8y.ant-typography[disabled],.css-16cpc8y.ant-typography a[disabled],a.css-16cpc8y.ant-typography.ant-typography-disabled,.css-16cpc8y.ant-typography a.ant-typography-disabled{color:rgba(0, 0, 0, 0.25);cursor:not-allowed;}a.css-16cpc8y.ant-typography[disabled]:active,.css-16cpc8y.ant-typography a[disabled]:active,a.css-16cpc8y.ant-typography.ant-typography-disabled:active,.css-16cpc8y.ant-typography a.ant-typography-disabled:active,a.css-16cpc8y.ant-typography[disabled]:hover,.css-16cpc8y.ant-typography a[disabled]:hover,a.css-16cpc8y.ant-typography.ant-typography-disabled:hover,.css-16cpc8y.ant-typography a.ant-typography-disabled:hover{color:rgba(0, 0, 0, 0.25);}a.css-16cpc8y.ant-typography[disabled]:active,.css-16cpc8y.ant-typography a[disabled]:active,a.css-16cpc8y.ant-typography.ant-typography-disabled:active,.css-16cpc8y.ant-typography a.ant-typography-disabled:active{pointer-events:none;}.css-16cpc8y.ant-typography .ant-typography-expand,.css-16cpc8y.ant-typography .ant-typography-edit,.css-16cpc8y.ant-typography .ant-typography-copy{color:#416ed2;text-decoration:none;outline:none;cursor:pointer;transition:color 0.3s;margin-left:4px;}.css-16cpc8y.ant-typography .ant-typography-expand:focus,.css-16cpc8y.ant-typography .ant-typography-edit:focus,.css-16cpc8y.ant-typography .ant-typography-copy:focus,.css-16cpc8y.ant-typography .ant-typography-expand:hover,.css-16cpc8y.ant-typography .ant-typography-edit:hover,.css-16cpc8y.ant-typography .ant-typography-copy:hover{color:#305ab7;}.css-16cpc8y.ant-typography .ant-typography-expand:active,.css-16cpc8y.ant-typography .ant-typography-edit:active,.css-16cpc8y.ant-typography .ant-typography-copy:active{color:#305ab7;}.css-16cpc8y.ant-typography-edit-content{position:relative;}div.css-16cpc8y.ant-typography-edit-content{left:-12px;margin-top:-12px;margin-bottom:calc(1em - 12px);}.css-16cpc8y.ant-typography-edit-content .ant-typography-edit-content-confirm{position:absolute;right:10px;bottom:8px;color:rgb(57,57,57);font-weight:normal;font-size:14px;font-style:normal;pointer-events:none;}.css-16cpc8y.ant-typography-edit-content textarea{margin:0!important;-moz-transition:none;height:1em;}.css-16cpc8y.ant-typography .ant-typography-copy-success,.css-16cpc8y.ant-typography .ant-typography-copy-success:hover,.css-16cpc8y.ant-typography .ant-typography-copy-success:focus{color:#52c41a;}.css-16cpc8y.ant-typography .ant-typography-copy-icon-only{margin-left:0;}a.css-16cpc8y.ant-typography-ellipsis,span.css-16cpc8y.ant-typography-ellipsis{display:inline-block;max-width:100%;}.css-16cpc8y.ant-typography-single-line{white-space:nowrap;}.css-16cpc8y.ant-typography-ellipsis-single-line{overflow:hidden;text-overflow:ellipsis;}a.css-16cpc8y.ant-typography-ellipsis-single-line,span.css-16cpc8y.ant-typography-ellipsis-single-line{vertical-align:bottom;}.css-16cpc8y.ant-typography-ellipsis-single-line >code{padding-top:0;padding-bottom:0;max-width:calc(100% - 1.2em);display:inline-block;overflow:hidden;text-overflow:ellipsis;vertical-align:bottom;box-sizing:content-box;}.css-16cpc8y.ant-typography-ellipsis-multiple-line{display:-webkit-box;overflow:hidden;-webkit-line-clamp:3;-webkit-box-orient:vertical;}.css-16cpc8y.ant-typography-rtl{direction:rtl;}.css-16cpc8y.ant-app{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,'Noto Sans',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol','Noto Color Emoji';font-size:14px;box-sizing:border-box;}.css-16cpc8y.ant-app::before,.css-16cpc8y.ant-app::after{box-sizing:border-box;}.css-16cpc8y.ant-app [class^="ant-app"],.css-16cpc8y.ant-app [class*=" ant-app"]{box-sizing:border-box;}.css-16cpc8y.ant-app [class^="ant-app"]::before,.css-16cpc8y.ant-app [class*=" ant-app"]::before,.css-16cpc8y.ant-app [class^="ant-app"]::after,.css-16cpc8y.ant-app [class*=" ant-app"]::after{box-sizing:border-box;}.css-16cpc8y.ant-app{color:#1b1b1b;font-size:14px;line-height:1.5714285714285714;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,'Noto Sans',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol','Noto Color Emoji';}.anticon{display:inline-flex;align-items:center;color:inherit;font-style:normal;line-height:0;text-align:center;text-transform:none;vertical-align:-0.125em;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}.anticon >*{line-height:1;}.anticon svg{display:inline-block;}.anticon .anticon .anticon-icon{display:block;}.anticon{display:inline-flex;align-items:center;color:inherit;font-style:normal;line-height:0;text-align:center;text-transform:none;vertical-align:-0.125em;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}.anticon >*{line-height:1;}.anticon svg{display:inline-block;}.anticon .anticon .anticon-icon{display:block;}:focus {
  outline: none;
}
:focus-visible {
  outline: none;
}
input::-ms-clear,
input::-ms-reveal {
  display: none;
}
*,
*::before,
*::after {
  box-sizing: border-box;
}
.container {
  margin: 0;
  text-align: left;
  font-weight: initial;
  font-family: sans-serif;
  -webkit-font-smoothing: auto;
  -moz-osx-font-smoothing: initial;
  line-height: 1.15;
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  -ms-overflow-style: scrollbar;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  --font: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
    'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji',
    'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  --cnfont:  -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif;
  --size: 20px;
  --width: 800px;
  --space: 0;
  --lineheight: 1.8;
  --weight: 400;
  --blockspace: 20px;
  --indent: 0em;
  --titlealign: left;
  --align: left;
  --imageleft: auto;
  --imageright: auto;
  --imagehide: block;
  --margin: 80px;
  --padding: 80px;
  --offsetleft: 0px;
  --offsetright: 0px;
  --columncount: 2;
  --columngap: 60px;
  --columnwidth: 90%;
  --title1: 2em;
  --title1weight: 500;
  --title1color: #1b1b1b;
  --title2: 1.6em;
  --title2weight: 500;
  --title2color: #1b1b1b;
  --title3: 1.2em;
  --title3weight: 500;
  --title3color: #1b1b1b;
  --title4: 1em;
  --title4weight: 500;
  --title4color: #1b1b1b;
  --title5: 1em;
  --title5weight: 500;
  --title5color: #1b1b1b;
  --title6: 1em;
  --title6weight: 500;
  --title6color: #1b1b1b;
  --color: #1b1b1b;
  --link: #416ed2;
  --hover: #305ab7;
  --visited: #305ab7;
  --select: #1b1b1b;
  --selectbg: #bbd6fc;
  --bg-r: 237;
  --bg-g: 237;
  --bg-b: 237;
  --bg: #ffffff;
  --canvas: #ededed;
  --track-width: 8px;
  --track: #e2e2e2;
  --thumb: #9e9e9e;
  --radius: 4px;
}
.container .ant-app {
  color:  #1b1b1b;
  font-size: var(--size);
  font-family:  -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif;
  font-weight: var(--weight);
  line-height: var(--lineheight);
  padding-left: var(--offsetleft);
  padding-right: var(--offsetright);
}
@-ms-viewport {
  width: device-width;
}
[tabindex='-1']:focus {
  outline: none;
}
hr {
  box-sizing: content-box;
  height: 0;
  overflow: visible;
}
h1,
h2,
h3,
h4,
h5,
h6 {
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 500;
}
p {
  margin-top: 0;
  margin-bottom: 1em;
}
abbr[title],
abbr[data-original-title] {
  -webkit-text-decoration: underline dotted;
  text-decoration: underline;
  text-decoration: underline dotted;
  border-bottom: 0;
  cursor: help;
}
address {
  margin-bottom: 1em;
  font-style: normal;
  line-height: inherit;
}
input[type='text'],
input[type='password'],
input[type='number'],
textarea {
  -webkit-appearance: none;
}
ol,
ul,
dl {
  margin-top: 0;
  margin-bottom: 1em;
}
ol ol,
ul ul,
ol ul,
ul ol {
  margin-bottom: 0;
}
dt {
  font-weight: 500;
}
dd {
  margin-bottom: 0.5em;
  margin-left: 0;
}
blockquote {
  margin: 0 0 1em;
}
dfn {
  font-style: italic;
}
b,
strong {
  font-weight: bolder;
}
small {
  font-size: 80%;
}
sub,
sup {
  position: relative;
  font-size: 75%;
  line-height: 0;
  vertical-align: baseline;
}
sub {
  bottom: -0.25em;
}
sup {
  top: -0.5em;
}
pre,
code,
kbd,
samp {
  font-size: 1em;
  font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;
}
pre {
  margin-top: 0;
  margin-bottom: 1em;
  overflow: auto;
}
figure {
  margin: 0 0 1em;
}
img {
  vertical-align: middle;
  border-style: none;
}
a,
area,
button,
[role='button'],
input:not([type='range']),
label,
select,
summary,
textarea {
  touch-action: manipulation;
}
table {
  border-collapse: collapse;
}
caption {
  padding-top: 0.75em;
  padding-bottom: 0.3em;
  text-align: left;
  caption-side: bottom;
}
input,
button,
select,
optgroup,
textarea {
  margin: 0;
  color: inherit;
  font-size: inherit;
  font-family: inherit;
  line-height: inherit;
}
button,
input {
  overflow: visible;
}
button,
select {
  text-transform: none;
}
button,
html [type='button'],
[type='reset'],
[type='submit'] {
  -webkit-appearance: button;
}
button::-moz-focus-inner,
[type='button']::-moz-focus-inner,
[type='reset']::-moz-focus-inner,
[type='submit']::-moz-focus-inner {
  padding: 0;
  border-style: none;
}
input[type='radio'],
input[type='checkbox'] {
  box-sizing: border-box;
  padding: 0;
}
input[type='date'],
input[type='time'],
input[type='datetime-local'],
input[type='month'] {
  -webkit-appearance: listbox;
}
textarea {
  overflow: auto;
  resize: vertical;
}
fieldset {
  min-width: 0;
  margin: 0;
  padding: 0;
  border: 0;
}
legend {
  display: block;
  width: 100%;
  max-width: 100%;
  margin-bottom: 0.5em;
  padding: 0;
  color: inherit;
  font-size: 1.5em;
  line-height: inherit;
  white-space: normal;
}
progress {
  vertical-align: baseline;
}
[type='number']::-webkit-inner-spin-button,
[type='number']::-webkit-outer-spin-button {
  height: auto;
}
[type='search'] {
  outline-offset: -2px;
  -webkit-appearance: none;
}
[type='search']::-webkit-search-cancel-button,
[type='search']::-webkit-search-decoration {
  -webkit-appearance: none;
}
::-webkit-file-upload-button {
  font: inherit;
  -webkit-appearance: button;
}
output {
  display: inline-block;
}
summary {
  display: list-item;
}
template {
  display: none;
}
[hidden] {
  display: none !important;
}
mark {
  padding: 0.2em;
}

.copyright {
  line-height: normal;
  display: flex;
  align-items: center;
  flex-direction: column;
  padding-bottom: 20px;
}
.copyright .ant-btn.ant-btn-lg.ant-btn-icon-only {
  width: auto;
  height: auto;
  opacity: 0.2;
  padding: 7px 10px;
}
.copyright .ant-btn.ant-btn-lg.ant-btn-icon-only svg {
  width: 40px;
  height: 40px;
}
.copyright .ant-btn.ant-btn-lg.ant-btn-icon-only:hover {
  opacity: 1;
  background: transparent;
}
.copyright .ant-btn.ant-btn-lg.ant-btn-icon-only.like:hover {
  color: #f10606;
}
.copyright .ant-btn.ant-btn-lg.ant-btn-icon-only.unlike:hover {
  color: #e7c207;
}
.copyright .ant-btn.ant-btn-lg.ant-btn-icon-only.coffee:hover {
  color: #ce6a07;
}
.copyright .ant-btn.ant-btn-sm {
  font-size: 12px;
  opacity: 0.4;
  padding-left: 6px;
  padding-right: 6px;
  height: auto;
}
.copyright .ant-btn.ant-btn-sm:hover {
  opacity: 1;
}
.copyright .ant-typography.ant-typography-secondary {
  font-size: 12px;
  opacity: 0.5;
  margin-top: 3px;
}

.container .ant-app {
  min-height: 100vh;
}
.container a {
  text-decoration: none;
}
.container code,
.container tt {
  border-radius: 3px;
  padding: 0 5px;
  margin: 0 5px;
}
.container pre {
  padding: 0.6em 0.8em;
  word-wrap: break-word;
  border-radius: 3px;
}
.container pre code {
  display: inline;
  margin: 0;
  padding: 0;
  background: 0 0;
  border: 0;
}
.container kbd {
  margin: 0 0.2em;
  padding: 0.15em 0.4em 0.1em;
  font-size: 90%;
  border-bottom-width: 2px;
  border-radius: 3px;
}
.container blockquote {
  padding: 0.1em 1em;
  opacity: 0.85;
}
.container blockquote > :first-child {
  margin-top: 0px;
}
.container blockquote > :last-child {
  margin-bottom: 0px;
}
.container blockquote p {
  margin: 0;
}
.container hr {
  clear: both;
  margin: 15px 0;
  height: 0px;
  overflow: hidden;
  border: none;
  background: transparent;
  padding: 0;
}
.container table {
  width: 100%;
  max-width: 100%;
  border-collapse: collapse;
}
.container table pre {
  white-space: pre-wrap;
}
.container figure {
  overflow: auto;
}
.container figure > img,
.container figure > table,
.container figure > pre {
  margin: 0 !important;
}
.container tr th,
.container tr td {
  padding: 6px 13px;
}
.container tr th p {
  margin: 0;
}
.container img {
  object-fit: contain;
}
.container img,
.container video {
  max-width: 100%;
  height: auto;
}
.container embed {
  max-width: 100%;
}
.container li div,
.container li p {
  margin: 0;
}
.container mark {
  padding: 0;
  margin: 0;
  color: initial;
  background-color: initial;
}
.container :focus {
  outline: none;
}
.container [role='separator']::after {
  content: '';
  display: block;
  clear: both;
  margin: 25px 0;
  height: 2px;
  overflow: hidden;
  border: none;
  opacity: 0.1;
  background:  #1b1b1b;
  padding: 0;
}
.container [role='separator']:last-child::after {
  display: none;
}
.container .line {
  display: block;
}
.container .left {
  float: left;
  margin-right: 12px;
}
.container .right {
  float: right;
  margin-left: 12px;
}
.container .both {
  clear: both;
}
.container .full-width {
  width: 100%;
  max-width: 100% !important;
}
.container .noise {
  display: none !important;
}
.container .block {
  display: block;
}
.container .inline-block {
  display: inline-block;
}
.container .flex {
  display: flex;
  flex-wrap: wrap;
}
.container .inline-flex {
  display: inline-flex;
  flex-wrap: wrap;
}
.container .zone-width {
  min-width: 0;
}

.container {
  color:  #1b1b1b;
  background:  #ffffff;
}
.container code,
.container tt {
  border: 1px solid rgba( 237,  237,  237, 0.6);
  background: rgba( 237,  237,  237, 0.4);
}
.container pre {
  background: rgba( 237,  237,  237, 0.5);
}
.container kbd {
  border: 1px solid rgba( 237,  237,  237, 1);
}
.container blockquote {
  border-left: 4px solid rgba( 237,  237,  237, 1);
}
.container hr {
  border-bottom: 1px solid rgba( 237,  237,  237, 1);
}
.container table th:hover,
.container table tr:hover {
  background: rgba( 237,  237,  237, 0.6);
}
.container table tr {
  border-bottom: 1px solid rgba( 237,  237,  237, 0.6);
}
.container table thead tr:first-child,
.container table tbody tr:first-child {
  background: rgba( 237,  237,  237, 0.4);
}
.container table thead + tbody tr:first-child {
  background: transparent;
}
.container table tr td {
  border-inline-end: 1px solid  rgb(237, 237, 237);
}
.container h1,
.container h2,
.container h3,
.container h4,
.container h5,
.container h6 {
  color:  #1b1b1b;
}
.container a {
  color:  #416ed2;
}
.container a:hover {
  color:  #305ab7;
}
.container a:active {
  color:  #305ab7;
}
.container a:visited {
  color:  #305ab7;
}
.container ::selection {
  color:  #1b1b1b;
  background-color:  #bbd6fc;
}
.container .title a {
  color:  #1b1b1b;
}
.container .title a:hover {
  color:  #416ed2;
}
.container .footer {
  color:  #1b1b1b;
}
.container.solid {
  background:  rgb(237, 237, 237);
}

.container {
  padding: 1px;
  text-shadow: none;
  font-variant: tabular-nums;
  font-feature-settings: 'tnum';
}
.container h1 {
  font-size: var(--title1);
  color:  #1b1b1b;
  font-weight: var(--title1weight);
}
.container h2 {
  font-size: var(--title2);
  color:  #1b1b1b;
  font-weight: var(--title2weight);
}
.container h3 {
  font-size: var(--title3);
  color:  #1b1b1b;
  font-weight: var(--title3weight);
}
.container h4 {
  font-size: var(--title4);
  color:  #1b1b1b;
  font-weight: var(--title4weight);
}
.container h5 {
  font-size: var(--title5);
  color:  #1b1b1b;
  font-weight: var(--title5weight);
}
.container h6 {
  font-size: var(--title6);
  color:  #1b1b1b;
  font-weight: var(--title6weight);
}
.container h1,
.container h2,
.container h3,
.container h4,
.container h5,
.container h6 {
  text-indent: 0;
}
.container a.link {
  margin: 0 6px;
}
.container a.link-with-img {
  display: inline-block;
}
.container a.link-with-img img {
  margin: 0 !important;
}
.container ol,
.container ul {
  text-indent: 0;
}
.container pre {
  white-space: pre-wrap;
}
.container pre,
.container code,
.container blockquote {
  text-indent: 0;
  text-align: left;
}
.container p,
.container blockquote,
.container ul,
.container ol,
.container dl,
.container table,
.container pre,
.container section,
.container figcaption,
.container li,
.container .block {
  margin: var(--blockspace) 0;
}
.container table {
  width: var(--width);
  max-width: var(--width);
  border-top: 1px solid  rgb(237, 237, 237);
  border-bottom: 1px solid  rgb(237, 237, 237);
}
.container .flex p,
.container .inline-flex p,
.container .flex blockquote,
.container .inline-flex blockquote,
.container .flex ul,
.container .inline-flex ul,
.container .flex ol,
.container .inline-flex ol,
.container .flex dl,
.container .inline-flex dl,
.container .flex table,
.container .inline-flex table,
.container .flex pre,
.container .inline-flex pre,
.container .flex section,
.container .inline-flex section,
.container .flex figcaption,
.container .inline-flex figcaption,
.container .flex .block,
.container .inline-flex .block {
  margin: 0;
}
.container .flex > *,
.container .inline-flex > * {
  margin-left: 10px !important;
  margin-right: 10px !important;
}
.container .flex > *:first-child,
.container .inline-flex > *:first-child {
  margin-left: 0 !important;
}
.container .flex > *:last-child,
.container .inline-flex > *:last-child {
  margin-right: 0 !important;
}
.container .pages {
  min-height: 610px;
  max-width: var(--width);
  margin:  80px auto;
}
.container .pages svg {
  width: 20px;
  height: 20px;
}
.container .pages .MathJax_SVG svg {
  width: auto;
  height: auto;
}
.container .page {
  padding-bottom: 20px;
  margin-bottom: 20px;
  word-break: break-word;
  text-indent: var(--indent);
  letter-spacing: var(--space);
  text-align: var(--align);
}
.container .page > *:first-child {
  margin-top: 0;
}
.container .page > *:last-child {
  margin-bottom: 0;
}
.container .page:last-child {
  margin-bottom: 0;
  border-bottom-width: 0;
}
.container .page:before,
.container .page:after {
  content: '';
  display: block;
  clear: both;
  height: 0px;
}
.container .page img {
  display: var(--imagehide);
}
.container .page img.large {
  margin-top: var(--blockspace) !important;
  margin-bottom: var(--blockspace) !important;
  margin-left: var(--imageleft) !important;
  margin-right: var(--imageright) !important;
}
.container .page img.tiny,
.container .page img.base64 {
  width: auto;
}
.container .page figure {
  overflow: auto;
}
.container .page figure > img.large,
.container .page figure > table,
.container .page figure > pre {
  margin-top: 0 !important;
  margin-bottom: 0 !important;
}
.container .page figure > figcaption {
  text-align: center;
  font-size: 90%;
  opacity: 0.8;
  margin-top: 6px;
}
.container .page p > img.large,
.container .page a img {
  margin-top: 0 !important;
  margin-bottom: 0 !important;
}
.container .page .title {
  text-indent: 0;
  margin-bottom: 0;
  text-align: var(--titlealign);
}
.container .page .meta {
  font-size: 80%;
  text-indent: 0;
  text-align: var(--titlealign);
  margin: 0 0 var(--blockspace);
}
.container .page .meta > span {
  opacity: 0.7;
  position: relative;
  margin-right: 24px;
}
.container .page .meta > span.ant-avatar {
  margin-right: 2px;
}
.container .page .meta > span.ant-avatar img {
  display: block;
}
.container .page .meta > span::after {
  content: '';
  position: absolute;
  right: -12px;
  top: 47%;
  display: block;
  width: 3px;
  height: 3px;
  background:  #1b1b1b;
  border-radius: 50%;
}
.container .page .meta > span:last-child::after {
  display: none;
}
.container .page .meta.avatar .ant-avatar {
  float: left;
  opacity: 1;
  width: 46px;
  height: 46px;
  margin-right: 16px;
  background:  #ffffff;
  border-radius: 6px;
  overflow: hidden;
}
.container .page .meta.avatar .ant-avatar img {
  display: block;
}
.container .page .meta.avatar .author {
  opacity: 1;
  line-height: 1.3;
  display: block;
}
.container .page .meta.avatar .author::after {
  display: none;
}
.container .page .meta::after {
  content: '';
  display: block;
  clear: both;
}
.container .page .excerpt {
  text-indent: 0;
  border-color:  #416ed2;
  background:  rgb(237, 237, 237);
}
.container .page .excerpt p {
  font-size: 90%;
}
.container .page .cover {
  text-indent: 0;
  margin-bottom: var(--blockspace);
}
.container .page .cover .ant-image {
  width: 100%;
  background: #f5f5f5;
}
.container .page .cover img {
  margin: 0 !important;
  width: 100%;
}
.container .page .footer {
  text-indent: 0;
  margin: calc(var(--blockspace) * 2) 0 0;
}
.container .page .footer .ant-tag {
  cursor: pointer;
  min-height: 27px;
  border-radius: 15px;
  background:  #ffffff;
  padding: 3px 12px 3px 3px;
  margin: 0 5px 4px 0;
  display: inline-block;
}
.container .page .footer .ant-tag::before {
  content: '#';
  margin-right: 4px;
  background:  rgb(237, 237, 237);
  width: 20px;
  height: 20px;
  text-align: center;
  font-size: 12px;
  color:  #416ed2;
  line-height: 20px;
  border-radius: 50px;
  display: inline-block;
}
.container .page .footer .ant-tag:hover {
  color:  #1b1b1b;
  background-color:  #bbd6fc;
}
.container .page .page-empty.ant-result {
  padding: 180px 0;
}
.container .page .page-empty.ant-result .ant-result-icon svg {
  width: auto;
  height: auto;
}
.container .page.zh {
  font-family:  -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif;
}
.container .tex,
.container .katex-display {
  text-align: center;
  margin: 50px 0;
}
.container .sub-page::before {
  content: '';
  display: block;
  height: var(--blockspace);
  border-top: 1px solid  #1b1b1b;
  opacity: 0.1;
  margin-left: calc(-1 *  80px);
  margin-right: calc(-1 *  80px);
}
.container .sub-page .sub-title {
  margin-bottom: -2px;
}
@media screen and (max-width: 600px) {
  .container .pages {
    margin: 20px 16px;
  }
}

.container.paper {
  background:  rgb(237, 237, 237);
}
.container.paper table {
  margin: var(--blockspace) calc( 80px * -1);
}
.container.paper .page {
  border-radius: 6px;
  background:  #ffffff;
  padding:  80px;
  box-shadow: 0 0 6px rgba(0, 0, 0, 0.15);
}
.container.paper .page .cover {
  margin: var(--blockspace) calc( 80px * -1);
}
.container.paper .page-block {
  padding-left:  80px;
  padding-right:  80px;
}
.container.paper .page-block .cover {
  margin: 0;
  max-width: 100%;
}
@media screen and (max-width: 600px) {
  .container.paper .page {
    padding: 20px;
  }
  .container.paper .page .cover {
    max-width: calc(100% + 40px);
    margin: -10px -20px 0;
  }
}

@media print {
  .container {
    padding-right: 0 !important;
  }
  .container .pages {
    margin: 0;
    max-width: 100%;
  }
  .container .pages pre,
  .container .pages img,
  .container .pages table {
    break-inside: avoid;
    page-break-inside: avoid;
  }
  .container .page-block {
    column-count: auto;
    margin-bottom: 0;
    padding-bottom: 0;
    padding-top: 0;
  }
  .container.paper .page {
    box-shadow: none;
  }
}

.container.shot.paper .page {
  border-radius: 0;
  box-shadow: none;
}

@-webkit-keyframes fadeIn {
  0% {
    opacity: 0;
    -webkit-transform: translate3d(0, 1600px, 0);
    transform: translate3d(0, 1600px, 0);
  }

  100% {
    opacity: 1;
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }
}

@keyframes fadeIn {
  0% {
    opacity: 0;
    -webkit-transform: translate3d(0, 1600px, 0);
    transform: translate3d(0, 1600px, 0);
  }

  100% {
    opacity: 1;
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }
}

@-webkit-keyframes fadeOut {
  0% {
    opacity: 1;
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }

  100% {
    opacity: 0;
    -webkit-transform: translate3d(0, 1600px, 0);
    transform: translate3d(0, 1600px, 0);
  }
}

@keyframes fadeOut {
  0% {
    opacity: 1;
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }

  100% {
    opacity: 0;
    -webkit-transform: translate3d(0, 1600px, 0);
    transform: translate3d(0, 1600px, 0);
  }
}

.container.in .pages {
  -webkit-animation-name: fadeIn;
  animation-name: fadeIn;
  -webkit-animation-duration: .3s;
  animation-duration: .3s;
  -webkit-animation-fill-mode: both;
  animation-fill-mode: both;
}

.container.out .pages {
  -webkit-animation-name: fadeOut;
  animation-name: fadeOut;
  -webkit-animation-duration: .2s;
  animation-duration: .2s;
  -webkit-animation-fill-mode: both;
  animation-fill-mode: both;
}

    .container {
      --codefont: inherit;
      --codesize: 20px;
      --codelineheight: 1;
      --codecomment: #697070;
      --codetag: #444a;
      --codeattr: #444a;
      --codenumber: #800;
      --codeblock: #800;
      --codevariable: #ab5656;
      --codeliteral: #695;
      --code: #397300;
      --codemeta: #1f7199;
      --codestring: #38a;
    }
    .hljs {
      border-radius: 3px;
      font-family: var(--codefont);
      font-size: var(--codesize);
      line-height: var(--codelineheight);
    }
    .hljs.large {
      position: fixed;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      padding: 50px;
      background:  #ffffff;
      z-index: 600;
      margin: 0;
      word-break: break-word;
      overflow: auto;
      white-space: pre-wrap;
    }
    
    .hljs-comment {
      color: var(--codecomment);
    }
    .hljs-punctuation,
    .hljs-tag {
      color: var(--codetag);
    }
    .hljs-tag .hljs-attr,
    .hljs-tag .hljs-name {
      color: var(--codeattr);
    }
    .hljs-attribute,
    .hljs-doctag,
    .hljs-keyword,
    .hljs-meta .hljs-keyword,
    .hljs-name,
    .hljs-selector-tag {
      font-weight: 700;
    }
    .hljs-deletion,
    .hljs-number,
    .hljs-quote,
    .hljs-selector-class,
    .hljs-selector-id,
    .hljs-string,
    .hljs-template-tag,
    .hljs-type {
      color: var(--codenumber);
    }
    .hljs-section,
    .hljs-title {
      color: var(--codeblock);
      font-weight: 700;
    }
    .hljs-link,
    .hljs-operator,
    .hljs-regexp,
    .hljs-selector-attr,
    .hljs-selector-pseudo,
    .hljs-symbol,
    .hljs-template-variable,
    .hljs-variable {
      color: var(--codevariable);
    }
    .hljs-literal {
      color: var(--codeliteral);
    }
    .hljs-addition,
    .hljs-built_in,
    .hljs-bullet,
    .hljs-code {
      color: var(--code);
    }
    .hljs-meta {
      color: var(--codemeta);
    }
    .hljs-meta .hljs-string {
      color: var(--codestring);
    }
    .hljs-emphasis {
      font-style: italic;
    }
    .hljs-strong {
      font-weight: 700;
    }
    img[action="zoom-in"] {cursor: zoom-in;}</style><title>（万字长文）说说大模型中的推理加速技术 - Circle 阅读助手</title></head><body><div class=" container paper in"><div class="ant-app"><div class="pages"><div class="page"><h1 class="title" id="outline_0"><a href="https://zhuanlan.zhihu.com/p/25708488005" target="_blank" rel="noreferrer">（万字长文）说说大模型中的推理加速技术</a></h1><p class="meta avatar"><span class="ant-avatar ant-avatar-circle ant-avatar-image css-16cpc8y"><img src="https://pica.zhimg.com/v2-37ad1fcab0465fe1803dac79658c7fe0_l.jpg?source=172ae18b 2x" class="tiny"></span><span class="author">爱吃牛油果的璐璐</span><span>2025-02-24 08:32</span><span>共 11505 字</span><span>阅读需 46 分钟</span></p><p></p><h2 id="outline_1">大模型推理过程概述</h2><p>为了便于理解大模型推理背后有哪些步骤，我们先假设大模型一次只处理一条文本（也就是先只考虑batch size为1的情形），例如：</p><ul><li>输入是“What color is the sky”，注意在大模型推理中输入也称为prompt</li><li>输出是“The sky is blue.“，在大模型推理中输出也称为completion</li></ul><p>使用基于<span><a href="https://zhida.zhihu.com/search?content_id=254163899&amp;content_type=Article&amp;match_order=1&amp;q=transformer&amp;zhida_source=entity" target="_blank" class="link">transformer</a></span>的大模型，从上述prompt生成completion的过程分为如下五个步骤：</p><ul><li>第1步，将大模型的模型权重加载到GPU的显存中</li><li>第2步，在CPU上对prompt做tokenization（分词），并将token的张量表示（token_ids）从内存传输到到GPU的显存中：</li></ul><p><img src="https://pic3.zhimg.com/v2-2f1876666ac1225dc4a3f98fa2d55a48_r.jpg" class="large"></p><ul><li>第3步，让token_ids走一遍网络得到输出的第一个token：</li></ul><p><img src="https://pic4.zhimg.com/v2-235c2697a0029f4f1366f22ab2a12b73_r.jpg" class="large"></p><p>这一步只需要走一遍网络，也被称为prefill（预填充）阶段。</p><ul><li>第4步，将生成的token拼接到输入的token的结尾，并以此作为一个新的输入来生成下一个token。重复上述过程，直到生成一个终止符的token或者达到配置的最大生成长度。终止符token也被称为end-of-sequence (EOS) token。</li></ul><p><img src="https://pic1.zhimg.com/v2-71f50a4fdbb5f8d871b05744216df824_r.jpg" class="large"></p><p>这一步需要反复走很多遍网络，也被称为decoding（解码）阶段，给到decoder的输入随着token的增加将会不断变长。</p><ul><li>第5步，将<b>生成的所有token从GPU的显存传输回CPU，然后由CPU将生成的id映射回文本</b>，这就是最终生成的completion：</li></ul><p><img src="https://pica.zhimg.com/v2-16feae5f4ddbe40a975ca8435f00943c_r.jpg" class="large"></p><h2 id="outline_2">大模型推理中的prefill与decoding</h2><p>大模型推理是一个两阶段的过程：</p><ul><li>预填充（prefill）阶段：在这个阶段，模型处理输入的全部prompt，并进行前向计算。这个阶段的目的是生成第一个输出token，即响应的起始点。</li><li>解码（decoding）阶段：一旦prefill阶段完成，模型进入decoding阶段，逐个生成剩余的响应token。</li></ul><p>在上面的图示中，预填充阶段和解码阶段都需要经过神经网络的前向计算，仅从逻辑上看二者本没有本质区别。但是在接下来的文章中，我们可以看到，这两个阶段的分离是基于它们在资源需求和优化策略上的根本差异。预填充阶段由于其计算密集性，可以充分利用GPU的并行处理能力，而解码阶段则因为内存密集性，可能受到内存带宽的限制。此外，预填充阶段完成后，可以独立于解码阶段运行，这允许系统更灵活地分配资源，优化处理效率。</p><p>对于预填充阶段和解码阶段更详细的介绍，超出了本文的范围，我们可以先了解这两个阶段的性能评估指标，这些指标会在实验中用到。</p><ul><li>预填充阶段的关键指标是TTFT（Time To First Token），即生成第一个token所需的时间。</li><li>解码阶段的关键指标是TPOT（Time Per Output Token），即生成每个响应token所需的平均时间。</li></ul><p>理解这些指标以及大模型的推理过程对于评估和优化大模型推理性能至关重要。</p><h2 id="outline_3"><span><a href="https://zhida.zhihu.com/search?content_id=254163899&amp;content_type=Article&amp;match_order=1&amp;q=KV+Cache&amp;zhida_source=entity" target="_blank" class="link">KV Cache</a></span> 技术</h2><p>KV Cache即为一种针对解码阶段的加速方法，KV Cache中的K和V指的是transformer的Self-Attention层中计算scaled dot-product attention时使用的Key和Value向量，如下图所示：</p><p><img src="https://pic3.zhimg.com/v2-4b07fdbf1c49b1497cb5053698b072ec_r.jpg" class="large"></p><figcaption>https://lilianweng.github.io/posts/2018-06-24-attention/#full-architecture</figcaption><p>图中<span><a href="https://zhida.zhihu.com/search?content_id=254163899&amp;content_type=Article&amp;match_order=1&amp;q=Multi-Head+Attention&amp;zhida_source=entity" target="_blank" class="link">Multi-Head Attention</a></span>的输出等价于多个独立的单头注意力的拼接，假设输入的（行）向量序列为：</p><p><img src="https://picx.zhimg.com/v2-aa27581123cff008ac91913e6e99f1e5_r.jpg" class="large"></p><p>那么Multi-Head Attention的输出可以形式地表示为:</p><p><img src="https://pic3.zhimg.com/v2-227b9fe58aeec92ea48ca3be82218560_r.jpg" class="large"></p><p>简单起见，这里省略了Attention矩阵的缩放因子。上面的公式中可以看出，<b>在解码阶段，逐个生成token时，新预测出来的第t+1个token，并不会影响已经算好的token</b></p><p><img src="https://pic2.zhimg.com/v2-3591cddd6aa62fb1515120367f5471f1_r.jpg" class="large"></p><p>因此这部分结果我们可以缓存下来供后续生成调用，避免不必要的重复计算，这就是所谓的KV Cache。</p><p>使用KVCache后，Multi-Head Attention的计算过程表示如下：</p><p><img src="https://pic3.zhimg.com/v2-5c220414565dd8166fe853e96a9732e0_r.jpg" class="large"></p><p><img src="https://pica.zhimg.com/v2-fdeb592e53c9b571f07e137a7fcfdd98_r.jpg" class="large"></p><p><img src="https://pic1.zhimg.com/v2-10651a21d3895f184cf8a875fb404080_r.jpg" class="large"></p><h2 id="outline_4">图解 KV Cache 过程</h2><p>不使用 KV Cache 和使用 KV Cache 的对比如下：</p><p><img src="https://pic4.zhimg.com/v2-f132ab20a01dbd44221bffc581c36e3d_r.jpg" class="large"></p><p><img src="https://pic4.zhimg.com/v2-467a5b3d6bc26d3d1d608cd21603f765_r.jpg" class="large"></p><p><img src="https://pic2.zhimg.com/v2-38585e7153a0097645570539e152ad63_r.jpg" class="large"></p><p><img src="https://picx.zhimg.com/v2-1744613b5484191ee005d923d69f801b_r.jpg" class="large"></p><p><b>KV Caching对于解码阶段的指标TPOT提升较大（Time Per Output Token），而对于预填充阶段的指标TTFT则没有影响（Time To First Token）。</b>KV Cache实际上是一种用空间来换时间的做法，因此不可避免地带来一些新的问题：</p><ul><li>第一，通常情况下，在gpu上做大模型的推理时，开启KV Cache会占用更多的GPU显存，更多的显存占用一方面限制了序列的总长度，影响了上下文的最大窗口长度；另一方面也限制了一次能处理的序列的总数量，也就是batch_size，进而影响到了系统的吞吐量。</li><li>第二，KV Cache减少了gpu在一次推理中的运算量，但是花费了更多的时间在读取缓存数据上。通常，加载1MB的数据到GPU核中的时间，比在GPU核上对1MB的数据做计算的时间更长，因此KV Cache开启后可能会导致GPU的使用率比较低，从成本上来讲这也是不划算的。</li></ul><p>围绕以上两点，很多大模型推理框架都从减少KV Cache的大小/降低KV Cache的碎片化/提升KV Cache的访存效率等角度出发来做系统的优化。</p><h2 id="outline_5">KV Cache 占用显存分析</h2><p>计算KV Cache占用的显存的大小其实并不复杂，从外到内需要考虑如下的参数：</p><ul><li>一个batch中包含<code>b</code>个文本序列，也就是batch size为<code>b</code></li><li>每个文本序列包含<code>t</code>个token，也就是序列长度为<code>t</code>，这里的序列长度指的是序列总长度（包含prompt和completion）</li><li>每个token需要缓存Key和Value两类张量</li><li>每个decoder包含了<code>n_layers</code>个注意力层</li><li>每个（多头）注意力包含<code>n_heads</code>个头</li><li>注意力层的向量维度是<code>d_head</code></li><li>最后，用<code>p_a</code>来表示每个参数在不同的精度下占用的字节数</li><ul><li>对于fp32，<code>p_a</code>=4</li><li>对于fp16/bf16，<code>p_a</code>=2</li><li>对于fp8/int8，<code>p_a</code>=1</li></ul></ul><p>那么，在MHA(multi-head attention)中，每个token的KV Cache所占用的显存大小为：（以字节为单位）</p><p><span><span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>2</mn><mo>&amp;#x2217;</mo><msub><mi>n</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>l</mi><mi>a</mi><mi>y</mi><mi>e</mi><mi>r</mi><mi>s</mi></mrow></msub><mo>&amp;#x2217;</mo><msub><mi>n</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>s</mi></mrow></msub><mo>&amp;#x2217;</mo><msub><mi>d</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi></mrow></msub><mo>&amp;#x2217;</mo><msub><mi>p</mi><mi>a</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="29.019ex" height="2.558ex" viewBox="0 -750.1 12494.2 1101.2" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.815ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#MJMAIN-32" x="0" y="0"></use><use xlink:href="#MJMAIN-2217" x="722" y="0"></use><g transform="translate(1445,0)"><use xlink:href="#MJMATHI-6E" x="0" y="0"></use><g transform="translate(600,-150)"><use transform="scale(0.707)" xlink:href="#MJMATHI-6C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-61" x="298" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-79" x="828" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-65" x="1325" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-72" x="1791" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-73" x="2243" y="0"></use></g></g><use xlink:href="#MJMAIN-2217" x="4286" y="0"></use><g transform="translate(5009,0)"><use xlink:href="#MJMATHI-6E" x="0" y="0"></use><g transform="translate(600,-150)"><use transform="scale(0.707)" xlink:href="#MJMATHI-68" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-65" x="576" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-61" x="1043" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-64" x="1572" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-73" x="2096" y="0"></use></g></g><use xlink:href="#MJMAIN-2217" x="7746" y="0"></use><g transform="translate(8468,0)"><use xlink:href="#MJMATHI-64" x="0" y="0"></use><g transform="translate(520,-150)"><use transform="scale(0.707)" xlink:href="#MJMATHI-68" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-65" x="576" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-61" x="1043" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-64" x="1572" y="0"></use></g></g><use xlink:href="#MJMAIN-2217" x="10793" y="0"></use><g transform="translate(11516,0)"><use xlink:href="#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-61" x="712" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>2</mn><mo>∗</mo><msub><mi>n</mi><mrow class="MJX-TeXAtom-ORD"><mi>l</mi><mi>a</mi><mi>y</mi><mi>e</mi><mi>r</mi><mi>s</mi></mrow></msub><mo>∗</mo><msub><mi>n</mi><mrow class="MJX-TeXAtom-ORD"><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>s</mi></mrow></msub><mo>∗</mo><msub><mi>d</mi><mrow class="MJX-TeXAtom-ORD"><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi></mrow></msub><mo>∗</mo><msub><mi>p</mi><mi>a</mi></msub></math></span></span><span class="tex2jax_ignore math-holder">2 * n_{layers} * n_{heads} * d_{head} * p_a</span></span></span> </p><p>整个batch的所有token占用的KV Cache的总大小为：（以字节为单位）</p><p><span><span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>2</mn><mo>&amp;#x2217;</mo><mi>b</mi><mo>&amp;#x2217;</mo><mi>t</mi><mo>&amp;#x2217;</mo><msub><mi>n</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>l</mi><mi>a</mi><mi>y</mi><mi>e</mi><mi>r</mi><mi>s</mi></mrow></msub><mo>&amp;#x2217;</mo><msub><mi>n</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>s</mi></mrow></msub><mo>&amp;#x2217;</mo><msub><mi>d</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi></mrow></msub><mo>&amp;#x2217;</mo><msub><mi>p</mi><mi>a</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="35.246ex" height="2.558ex" viewBox="0 -750.1 15175.1 1101.2" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.815ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#MJMAIN-32" x="0" y="0"></use><use xlink:href="#MJMAIN-2217" x="722" y="0"></use><use xlink:href="#MJMATHI-62" x="1445" y="0"></use><use xlink:href="#MJMAIN-2217" x="2097" y="0"></use><use xlink:href="#MJMATHI-74" x="2819" y="0"></use><use xlink:href="#MJMAIN-2217" x="3403" y="0"></use><g transform="translate(4126,0)"><use xlink:href="#MJMATHI-6E" x="0" y="0"></use><g transform="translate(600,-150)"><use transform="scale(0.707)" xlink:href="#MJMATHI-6C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-61" x="298" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-79" x="828" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-65" x="1325" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-72" x="1791" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-73" x="2243" y="0"></use></g></g><use xlink:href="#MJMAIN-2217" x="6967" y="0"></use><g transform="translate(7690,0)"><use xlink:href="#MJMATHI-6E" x="0" y="0"></use><g transform="translate(600,-150)"><use transform="scale(0.707)" xlink:href="#MJMATHI-68" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-65" x="576" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-61" x="1043" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-64" x="1572" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-73" x="2096" y="0"></use></g></g><use xlink:href="#MJMAIN-2217" x="10426" y="0"></use><g transform="translate(11149,0)"><use xlink:href="#MJMATHI-64" x="0" y="0"></use><g transform="translate(520,-150)"><use transform="scale(0.707)" xlink:href="#MJMATHI-68" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-65" x="576" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-61" x="1043" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-64" x="1572" y="0"></use></g></g><use xlink:href="#MJMAIN-2217" x="13474" y="0"></use><g transform="translate(14197,0)"><use xlink:href="#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-61" x="712" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>2</mn><mo>∗</mo><mi>b</mi><mo>∗</mo><mi>t</mi><mo>∗</mo><msub><mi>n</mi><mrow class="MJX-TeXAtom-ORD"><mi>l</mi><mi>a</mi><mi>y</mi><mi>e</mi><mi>r</mi><mi>s</mi></mrow></msub><mo>∗</mo><msub><mi>n</mi><mrow class="MJX-TeXAtom-ORD"><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>s</mi></mrow></msub><mo>∗</mo><msub><mi>d</mi><mrow class="MJX-TeXAtom-ORD"><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi></mrow></msub><mo>∗</mo><msub><mi>p</mi><mi>a</mi></msub></math></span></span><span class="tex2jax_ignore math-holder">2 * b * t * n_{layers} * n_{heads} * d_{head} * p_a</span></span></span> </p><p>实际上，对于一个给定的模型架构（例如Llama2），模型的大小（7B/13B/70B)主要取决于层数<code>n_layes</code>和头数<code>n_heads</code>：</p><p><img src="https://pic3.zhimg.com/v2-1975a36ede2145ae60bc943ff9d24ec6_r.jpg" class="large"></p><p>因此，对于越大的模型而言，KV Cache的增长主要来自于<code>n_layers</code>和<code>n_heads</code>的增长，如果我们能降低其中<code>n_heads</code>的大小，就可以有效降低KV Cache的显存占用。进一步观察可以发现，KV Cache的大小实际只和Key和Value的<code>n_heads</code>数有关，而和Query的<code>n_heads</code>数无关，因此我们只需要降低Key和Value的<code>n_heads</code>数就可以了，这也正是<span><a href="https://zhida.zhihu.com/search?content_id=254163899&amp;content_type=Article&amp;match_order=1&amp;q=MQA&amp;zhida_source=entity" target="_blank" class="link">MQA</a></span>（multi-query attention）和<span><a href="https://zhida.zhihu.com/search?content_id=254163899&amp;content_type=Article&amp;match_order=1&amp;q=GQA&amp;zhida_source=entity" target="_blank" class="link">GQA</a></span>（grouped-query attention）背后的核心思想。</p><p><img src="https://pic1.zhimg.com/v2-9764393a1f695a14adbaa839dbb188d6_r.jpg" class="large"></p><h2 id="outline_6">MQA 与 GQA</h2><p>在MHA(multi-head attention)中，每个注意力头分别独立计算Query/Key/Value向量；而在MQA（multi-query attention）中，每个注意力头的Query向量是独立的，但是所有注意力头的Key/Value向量都是共享的。</p><p>那么容易算出，在MQA中，KV Cache的总大小为：（以字节为单位）</p><p><span><span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>2</mn><mo>&amp;#x2217;</mo><mi>b</mi><mo>&amp;#x2217;</mo><mi>t</mi><mo>&amp;#x2217;</mo><msub><mi>n</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>l</mi><mi>a</mi><mi>y</mi><mi>e</mi><mi>r</mi><mi>s</mi></mrow></msub><mo>&amp;#x2217;</mo><msub><mi>d</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi></mrow></msub><mo>&amp;#x2217;</mo><msub><mi>p</mi><mi>a</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="27.211ex" height="2.558ex" viewBox="0 -750.1 11715.6 1101.2" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.815ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#MJMAIN-32" x="0" y="0"></use><use xlink:href="#MJMAIN-2217" x="722" y="0"></use><use xlink:href="#MJMATHI-62" x="1445" y="0"></use><use xlink:href="#MJMAIN-2217" x="2097" y="0"></use><use xlink:href="#MJMATHI-74" x="2819" y="0"></use><use xlink:href="#MJMAIN-2217" x="3403" y="0"></use><g transform="translate(4126,0)"><use xlink:href="#MJMATHI-6E" x="0" y="0"></use><g transform="translate(600,-150)"><use transform="scale(0.707)" xlink:href="#MJMATHI-6C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-61" x="298" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-79" x="828" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-65" x="1325" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-72" x="1791" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-73" x="2243" y="0"></use></g></g><use xlink:href="#MJMAIN-2217" x="6967" y="0"></use><g transform="translate(7690,0)"><use xlink:href="#MJMATHI-64" x="0" y="0"></use><g transform="translate(520,-150)"><use transform="scale(0.707)" xlink:href="#MJMATHI-68" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-65" x="576" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-61" x="1043" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-64" x="1572" y="0"></use></g></g><use xlink:href="#MJMAIN-2217" x="10014" y="0"></use><g transform="translate(10737,0)"><use xlink:href="#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-61" x="712" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>2</mn><mo>∗</mo><mi>b</mi><mo>∗</mo><mi>t</mi><mo>∗</mo><msub><mi>n</mi><mrow class="MJX-TeXAtom-ORD"><mi>l</mi><mi>a</mi><mi>y</mi><mi>e</mi><mi>r</mi><mi>s</mi></mrow></msub><mo>∗</mo><msub><mi>d</mi><mrow class="MJX-TeXAtom-ORD"><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi></mrow></msub><mo>∗</mo><msub><mi>p</mi><mi>a</mi></msub></math></span></span><span class="tex2jax_ignore math-holder">2 * b * t * n_{layers} * d_{head} * p_a</span></span></span> </p><p>MQA相对于MHA减少了<code>n_heads</code>这一项，由此带来KV Cache大小大约1-2个数量级的下降，以及推理速度的提升，但是使用MQA也带来了两个新的问题：</p><ul><li>第一，模型能力的下降。</li></ul><p>由于MQA在多个注意力头中共享了Key/Value向量，造成自注意力层的模型参数量接近腰斩，模型能力必然会受影响。曾经有一种观点是，虽然Attention层的参数量减少了一半，但是只要保证模型总参数量不变，也就是增加FFN/GLU层的参数量，就可以弥补整理模型能力的下降。然而，Llama2的技术报告（Llama 2: Open Foundation and Fine-Tuned Chat Models ）中指出，即便维持总参数量不变，MQA相比MHA的表现仍然明显更弱：</p><p><img src="https://pic4.zhimg.com/v2-f876af0180ef73bbf723f458cdcb5ab5_r.jpg" class="large"></p><ul><li>第二，无法做到“有效“的多卡并行。</li></ul><p>对于一些较大的LLM而言，由于占用的显存很大，模型推理无法在单个gpu上完成，需要做模型并行通过多卡提供推理服务。以模型并行的其中一种方法：张量并行为例，它通过对Tensor拆分，将一次Tensor计算拆分到多台设备上进行并行的计算，并将计算结果最终合并为目标张量。具体到注意力层上的张量并行，就是把不同的注意力头分配到多个不同的gpu上并行计算。以175B的GPT3为例，它有96个注意力头，对单机8卡的gpu，就要给每个gpu分配12个注意力头。</p><p>可是对于MQA，每个注意力头都进行相同的Key/Value向量的计算，这意味着，多张显卡上一部分计算是完全重复和冗余的，而重复的计算并没有给模型带来更多的多样性，等同于”浪费“了一部分宝贵的算力。</p><p>GQA在MHA和MQA之间寻求一种平衡，在GQA中引入了超参数G，代表注意力头的分组的数量，同一个分组内的注意力头的Key/Value是共享的。由此，在GQA中，KV Cache的总大小为：（以字节为单位）</p><p><span><span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>2</mn><mo>&amp;#x2217;</mo><mi>b</mi><mo>&amp;#x2217;</mo><mi>t</mi><mo>&amp;#x2217;</mo><msub><mi>n</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>l</mi><mi>a</mi><mi>y</mi><mi>e</mi><mi>r</mi><mi>s</mi></mrow></msub><mo>&amp;#x2217;</mo><mi>G</mi><mo>&amp;#x2217;</mo><msub><mi>d</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi></mrow></msub><mo>&amp;#x2217;</mo><msub><mi>p</mi><mi>a</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="31.232ex" height="2.673ex" viewBox="0 -799.9 13447.1 1151" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.815ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#MJMAIN-32" x="0" y="0"></use><use xlink:href="#MJMAIN-2217" x="722" y="0"></use><use xlink:href="#MJMATHI-62" x="1445" y="0"></use><use xlink:href="#MJMAIN-2217" x="2097" y="0"></use><use xlink:href="#MJMATHI-74" x="2819" y="0"></use><use xlink:href="#MJMAIN-2217" x="3403" y="0"></use><g transform="translate(4126,0)"><use xlink:href="#MJMATHI-6E" x="0" y="0"></use><g transform="translate(600,-150)"><use transform="scale(0.707)" xlink:href="#MJMATHI-6C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-61" x="298" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-79" x="828" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-65" x="1325" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-72" x="1791" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-73" x="2243" y="0"></use></g></g><use xlink:href="#MJMAIN-2217" x="6967" y="0"></use><use xlink:href="#MJMATHI-47" x="7690" y="0"></use><use xlink:href="#MJMAIN-2217" x="8698" y="0"></use><g transform="translate(9421,0)"><use xlink:href="#MJMATHI-64" x="0" y="0"></use><g transform="translate(520,-150)"><use transform="scale(0.707)" xlink:href="#MJMATHI-68" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-65" x="576" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-61" x="1043" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-64" x="1572" y="0"></use></g></g><use xlink:href="#MJMAIN-2217" x="11746" y="0"></use><g transform="translate(12469,0)"><use xlink:href="#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="#MJMATHI-61" x="712" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>2</mn><mo>∗</mo><mi>b</mi><mo>∗</mo><mi>t</mi><mo>∗</mo><msub><mi>n</mi><mrow class="MJX-TeXAtom-ORD"><mi>l</mi><mi>a</mi><mi>y</mi><mi>e</mi><mi>r</mi><mi>s</mi></mrow></msub><mo>∗</mo><mi>G</mi><mo>∗</mo><msub><mi>d</mi><mrow class="MJX-TeXAtom-ORD"><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi></mrow></msub><mo>∗</mo><msub><mi>p</mi><mi>a</mi></msub></math></span></span><span class="tex2jax_ignore math-holder">2 * b * t * n_{layers} * G * d_{head} * p_a</span></span></span> </p><p>从“GQA: Training Generalized Multi-Query Transformer Models from Multi-Head Checkpoints”这篇论文中的实验结果看，GQA相对于MHA各项能力并没有明显下降，同时又有接近MQA的推理速度：</p><p><img src="https://picx.zhimg.com/v2-1e3cbdf4c3c135e20ead14198fd3211d_r.jpg" class="large"></p><p>此外，在一个多卡的推理环境中，只需要将GQA的超参数G设为卡的数量，就可以做到充分且有效的并行计算。</p><h2 id="outline_7">Paged Attention 技术由来</h2><p>假设KV Cache在显存的使用上不存在任何浪费，但是如果显存管理策略简单粗暴，那就可能导致大量的显存被浪费。vllm的开发团队最早注意到这个问题，并提出了Paged Attention来应对大模型推理过程中的显存浪费。实际上，大模型推理系统中的显存碎片问题和操作系统中的内存碎片问题非常类似，vllm团队在设计Paged Attention的时候，也大量参考了操作系统中的分页内存管理。</p><p>在早期的操作系统中，通常采用的是连续内存分配的机制，它要求对于一个特定的进程，这个进程的内存分配是连续的，即进程的各个部分在物理内存中是相邻的。这个分配方式容易产生内存碎片问题，由于内存的反复分配和释放，产生的一系列小的、无法被有效利用的内存块（内存碎片）。这些碎片会降低内存的使用效率，因为操作系统可能找不到足够大的连续内存区域来分配给新的进程或数据结构，即使总的空闲内存量可能足够。</p><p>内存碎片主要有两种类型：</p><ul><li>内部碎片（Internal Fragmentation）：发生在内存块分配给进程后，但分配的内存块比进程实际需要的稍大，导致内存块中有一部分未被使用。这种类型的碎片是不可避免的，因为内存（在硬件的设计上）通常按固定大小的块分配。例如内存分配的最小单位是4K，当一个进程请求一个43K的内存块时，就可能会获得44K、48K等稍大一点的内存空间，因此由所需大小四舍五入而产生的多余空间就叫内部碎片。内部碎片的图示如下：</li></ul><p><img src="https://pic3.zhimg.com/v2-17d12d1b83d1962b5e098ff333852d4e_1440w.jpg" class="large"></p><ul><li>外部碎片（External Fragmentation）：发生在内存中存在多个小的空闲内存块，这些内存块的总和可能足够满足当前请求，但由于它们是不连续的，所以无法被分配给需要连续内存空间的进程。例如，在下图中灰色的部分即为外部碎片，外部碎片总的大小超过了进程7所需的内存大小，但是由于这些碎片是不连续的，导致实际上无法把这些内存分配给进程7：</li></ul><p><img src="https://pic2.zhimg.com/v2-b44d8ab029f626e5d293b10a23194465_r.jpg" class="large"></p><p><b>操作系统的分页内存管理</b></p><p>内存的连续分配方式会形成许多“碎片”，所以后来操作系统的设计者自然想到了“离散分配方式”的内存管理，分页内存管理就是其中一种。</p><p>分页内存管理是将一个进程的逻辑地址空间分成若干个大小相等的片，称为页面或页（page），并为各页加以编号，从0开始，如第0页、第1页等。相应地，也把内存空间分成与页面相同大小的若干个存储块，称为页帧（frame），也同样为它们加以编号，如0#块、1#块等等。在为进程分配内存时，以块为单位将进程中的若干个页分别装入到多个可以不相邻接的物理块中。</p><p>在分页系统中，允许将进程的各个页离散地存储在内存不同的物理块中，但系统应能保证进程的正确运行，即能在内存中找到每个页面所对应的物理块。为此，系统又为每个进程建立了一张页面映射表，简称页表（page table）。在进程地址空间内的所有页，依次在页表中有一页表项，其中记录了相应页在内存中对应的物理块号。在配置了页表后，进程执行时，通过查找该表，即可找到每页在内存中的物理块号。可见，页表的作用是实现从页号到物理块号的地址映射（逻辑地址向物理地址的映射）。</p><p>基本的分页内存管理的机制如下图所示：</p><p><img src="https://picx.zhimg.com/v2-5bb3a98770855d303a6853272be65093_r.jpg" class="large"></p><p>不难看出，只要每个frame足够小，且能做到对frame的动态分配，就可以有效降低内部碎片的产生。同时由于同一个page的frame并不要求在物理上是连续的，因此也可以缓解外部碎片的问题。</p><p><b>大模型的显存管理问题</b></p><p>看完操作系统及分页内存管理，我们回到大模型推理系统中的显存管理问题。早期的大模型推理系统，采用的也是连续的显存分配策略，也就是把同一个请求的所有KV Cache存储在一个连续的空间里，为此，需要按照每个生成序列的最大长度（例如2048个token）来预先分配出一块连续的显存空间。这种连续分配机制带来的显存碎片同样可分为两类：</p><ul><li>内部碎片：在大多数情况下，一个序列可能在达到最大长度前，就已经生成了终止符的token（end-of-sequence， EOS），因此序列的实际长度会比最大长度小的多，由此带来严重的内部碎片问题。</li><li>外部碎片：对于不同的序列，在请求推理服务时设置的最大参数可能是不一样的，由此对每个请求预先分配的显存空间大小也不一样，这样容易产生显存的外部碎片。</li></ul><p>下图就展示了在早期的大模型推理系统Orca中（vllm以外的三列），存在大量的内部碎片和外部碎片的浪费：</p><p><img src="https://pic2.zhimg.com/v2-1ab28a50ac8b97be690abe6141aa95a9_r.jpg" class="large"></p><h2 id="outline_8"><b>Paged Attention 技术原理</b></h2><p>借鉴了操作系统领域的分页机制，vllm提出了PagedAttention，具体来说，PagedAttention将每个生成序列的KV Cache划分为多个block，每个block中包含固定数量的key和value向量。同一个序列的多个block在物理空间上并不要求连续，在attention计算要用到KV Cache的时候，通过block table找到这个序列对应的block，进而从block中取出对应的key和value向量。Paged Attention具体的运行机制如下图所示：</p><p><img src="https://pic4.zhimg.com/v2-a7e4482133091b5773d0a4d21a361455_r.jpg" class="large"></p><p>实际上，上图中PagedAttention的策略设计几乎和操作系统中的分页内存管理是一一对应的，甚至于上面这张图和PageTable那张图长得也极为相似，具体的一些概念的对应关系如下：</p><p><img src="https://pica.zhimg.com/v2-ca059fe0a1641427f8eb78404a9df5dc_r.jpg" class="large"></p><h2 id="outline_9">Paged Attention 效果</h2><p>在vllm的原始论文中提及到，使用了Paged Attention以后，KV Cache的显存分配几乎没有浪费（near-zero waste ），这些以前被浪费的显存现在就可以用来同时容纳更多的请求，从而提升整个系统的吞吐量。在下面的实验结果中可以看到，使用了Paged Attention的vllm，在latency（这里指TPOT，Time Per Output Token）几乎不变的情况下，极大地提升了系统的吞吐量：</p><p><img src="https://pic3.zhimg.com/v2-b55b94af370c1a7513473413d9c18e12_r.jpg" class="large"></p><p>值得一提的是，虽然Paged Attention最早在vllm中被实现，但是现在的几乎所有主流的大模型推理框架中都实现了这一机制，包括HuggingFace的TGI和Nvidia的TensorRT-LLM。</p><h2 id="outline_10">Copy On Write 技术由来</h2><p>Paged Attention通过对KV Cache做显存管理，能有效降低大模型推理系统中的显存碎片问题，从而提升推理服务的吞吐量。在文本生成服务的实际应用中，有时要求一个prompt要生成多个不同的输出序列：</p><p><img src="https://pic1.zhimg.com/v2-46f9060db3f06b30522dfc89ae8ce562_r.jpg" class="large"></p><p>在这种场景下，结合了<span><a href="https://zhida.zhihu.com/search?content_id=254163899&amp;content_type=Article&amp;match_order=1&amp;q=Copy-On-Write&amp;zhida_source=entity" target="_blank" class="link">Copy-On-Write</a></span>机制的Paged Attention可以进一步节省可以共享的那部分显存。Copy-On-Write机制也借鉴自操作系统。</p><p>操作系统中的copy-on-write（COW）机制是一种用于优化内存管理和进程创建的技术。其核心思想是在某些情况下延迟数据复制，从而节省内存和提高效率。以进程创建为例，以下是copy-on-write机制的几个关键点：</p><ul><li>进程创建：在创建新进程（例如通过fork）时，操作系统通常会复制父进程的地址空间到子进程。使用copy-on-write，最初并不实际复制物理内存页，而是让父子进程共享相同的物理内存页。只有当进程之一尝试修改这些共享页面时，才会复制这些页面，即“写时复制”。</li><li>内存节省：因为最初不复制内存，所以如果新进程没有修改任何内存页，那么系统就节省了这部分内存。即使新进程最终修改了内存，也只在实际需要时才复制，这仍然比一开始就复制整个内存空间要高效。</li><li>写时复制：当进程尝试写入共享内存页时，操作系统会检测到这一操作，并创建该页的一个副本。之后，尝试写入的进程会使用这个新副本，而其他进程仍然访问原始页面。这样，内存的复制操作就只在实际需要写入时发生。</li></ul><p>在操作系统中，copy-on-write不仅用于进程创建，还可以用于其他需要延迟复制的场景，例如文件系统操作、内存映射文件等。</p><h2 id="outline_11">Copy-On-Write 机制的解码过程</h2><p>在某些场景下，为了让生成结果具有一定丰富性，我们需要对一个给定的prompt一次性生成多个completion，此类生成策略我们统称为并行采样，我们简要介绍其中的一种：beam search。beam search的基本思想是：在每一个时间步t，都保留多个不同的候选结果，直到最后一步才确定到底哪一个候选结果更为占优（或者把多个候选结果都输出）。候选结果的数量就是参数"num_beams"，下面以num_beams=2为例说明beam search的执行过程：</p><p><img src="https://pic4.zhimg.com/v2-8169b592c24688887040b668f8ab7e9d_r.jpg" class="large"></p><p>首先，第一个词“The”是已经确定的，在下一个词，我们并不只选择当前概率最高的"nice"，同时还要把概率次高的“dog“也记录下作为候选结果，此时记录的两个候选结果为：</p><ul><li>(The, nice): 0.5</li><li>(The, dog): 0.4</li></ul><p>再接下来，两个候选结果再继续选择各自概率top2高的词（因为“The nice house”和“The nice guy”同分，“The dog runs”和“The dog and”同分，实际这里选的是top3高的词），记录为：</p><ul><li>(The, nice, woman): 0.5*0.4=0.2</li><li>(The, nice, horse): 0.5*0.3=0.15</li><li>(The, nice, guy): 0.5*0.3=0.15</li><li>(The, dog, has): 0.4*0.9=0.36</li><li>(The, dog, and): 0.4*0.05=0.02</li><li>(The, dog, runs): 0.4*0.05=0.02</li></ul><p>因为num_beams=2，这里仍然只保留联合概率top2的序列作为候选：</p><ul><li>(The, dog, has): 0.4*0.9=0.36</li><li>(The, nice, woman): 0.5*0.4=0.2</li></ul><p>如果还没到终止条件，beam search会重复上述过程继续执行下去，如果已经到了最大长度，则会选取当前分数最高的(The, dog, has)进行输出。</p><p>我们可以看到beam search的多个输出可能存在相同的前缀，在这种情况下可以共享KV Cache来节省显存占用。</p><p>在vLLM中，当多个请求或序列需要共享相同的KV缓存块时，这些块会被映射到相同的物理内存块。为了确保在这些共享块上进行安全的操作<b>，vLLM实现了copy-on-write机制</b>。这意味着，<b>当一个序列需要修改它共享的KV缓存块时，vLLM会创建该块的一个副本，这样修改就不会影响其他序列</b>。这种机制允许vLLM在保持内存效率的同时，安全地处理并发请求。</p><p>“Efficient Memory Management for Large Language Model Serving with PagedAttention”论文里的图展示了对num_beams=4的beam search解码，vllm管理KV blocks的过程：</p><p><img src="https://picx.zhimg.com/v2-9898c26046aed3c5eb08cd80c2d19259_r.jpg" class="large"></p><ul><li>首先在第1个block的位置上，所有的beam candidate都共享了第一个Block 0（这里Block 0可以理解为prompt）</li><li>从第二个block开始，beam candidate 3和其他的beam candidate有了分叉</li><li>到第三个block为止，beam candidate 0-2仍然共享前3个block</li><li>到第四个block的时候，beam candidate 0-2都有了分叉，分别是Block 5/Block 6/Block 7</li><li>到第五个block时，原来的beam candidate 0 和 beam candidate 3被从top4中被淘汰掉了，此时对应的logical block都会被释放，对应的physical block的引用计数也会减一，也就是图上打叉号的Block 2/Block 4/Block 8/Block 5。如果这几个physical block的引用计数彻底归零，则vllm则会释放这部分physical block的显存。</li></ul><p>copy-on-write是一种有效的内存管理技术，它通过延迟复制操作来优化资源使用，提高系统效率。在vLLM中，类似的机制被用于高效地管理大型语言模型的KV缓存，允许多个请求或序列共享相同的内存块，直到需要修改时才进行复制。</p><h2 id="outline_12"><span><a href="https://zhida.zhihu.com/search?content_id=254163899&amp;content_type=Article&amp;match_order=1&amp;q=Prefix+Caching&amp;zhida_source=entity" target="_blank" class="link">Prefix Caching</a></span>技术</h2><p>在PagedAttention中，KV Cache只是在一个请求内复用，而没有做到跨请求的KV Cache复用。在多轮对话的场景下，下一轮的prompt其实刚好就是上一轮的prompt+completion：</p><p><img src="https://pic2.zhimg.com/v2-821746e2f79bebbec91743fde081b55f_r.jpg" class="large"></p><p>如果新一轮的prompt的KV Cache能够直接复用上一轮计算好的结果，做到跨请求复用KV Cache，那么就可以显著提升prefill的性能，降低新一轮请求的TTFT（Time To First Token）。这种优化方法被称为Prefix Caching，核心思想是缓存系统提示和历史对话中的键值（KV）缓存，以便在后续请求中重用，从而减少首次Token的计算耗时。接下来介绍论文中的一些Prefix Caching技术。</p><h2 id="outline_13">SGLang中的Prefix Caching 实现要点</h2><p>论文“SGLang: Efficient Execution of Structured Language Model Programs“中提出通过<span><a href="https://zhida.zhihu.com/search?content_id=254163899&amp;content_type=Article&amp;match_order=1&amp;q=RadixAttention&amp;zhida_source=entity" target="_blank" class="link">RadixAttention</a></span>来实现Prefix Caching，该实现的具体要点如下：</p><ul><li>在每次请求结束后，这次请求里的KV Cache不直接丢弃，而是借由RadixAttention算法将KV Cache仍然保留在GPU的显存中。RadixAttention算法还将序列token到KV Cache的映射关系，保存在RadixTree这种数据结构中。</li><li>当一个新的请求到来的时候，SGLang的调度器通过RadixTree做前缀匹配，查找新的请求是否命中缓存。如果命中了缓存，SGLang的调度器会复用KV Cache来完成这次请求。</li><li>由于GPU的显存是非常有限的，缓存在内存中的KV Cache不能永久被保留，需要设计相应的逐出策略。RadixAttention引入的逐出策略是LRU（least recently used），这种策略和操作系统中的LRU页面置换非常接近，具体的流程在SGLang的论文中有详细的描述：</li></ul><p><img src="https://pic3.zhimg.com/v2-164ac9537dc507a4a275b284f277b1b8_r.jpg" class="large"></p><figcaption>https://arxiv.org/pdf/2312.07104</figcaption><ul><li>SGLang的开发团队还发现，对同一时间段内的多个请求的调度策略如果仅仅是first-come-first-serve，无法达到最优的缓存复用效果。因此RadixAttention对于批处理的请求，又设计了一种名为cache-aware scheduling的调度算法，并证明了在离线场景下，这种调度策略是最优的。</li></ul><h2 id="outline_14">vllm中的Prefix Caching 实现要点</h2><p>vllm的Prefix Caching特性加入的时间比较晚，在两个月前都还只是一个实验性的功能。vllm的Prefix Caching实现和SGLang最大的不同是采用一种称为Hash RadixAttention的方法，它使用哈希码作为物理KV Block的唯一标识，这种方法在工程上更为简单：</p><div><pre class="notranslate hljs language-xl" data-highlighted="yes"><span class="hljs-function"><span class="hljs-title">hash</span>(<span class="hljs-keyword">prefix</span> tokens + <span class="hljs-keyword">block</span> tokens) &lt;--&gt;</span> L<span class="hljs-function"><span class="hljs-title">ogical</span> KV blocks -&gt;</span> Physical KV blocks</pre></div><p>要启用vLLM中的Prefix Caching，可以在vLLM引擎中设置enable_prefix_caching=True。例如，在代码中可以这样设置：</p><div><pre class="notranslate hljs language-routeros" data-highlighted="yes">llm = LLM(
    <span class="hljs-attribute">model</span>=<span class="hljs-string">'lmsys/longchat-13b-16k'</span>,
    <span class="hljs-attribute">enable_prefix_caching</span>=<span class="hljs-literal">True</span>
)</pre></div><h2 id="outline_15">deepseek中的Prefix Caching</h2><p>deepseek API提供的Prefix Caching产品名叫做Context Caching，和SGLang/vllm不同的是，DeepSeek采用的是上下文硬盘缓存技术，把预计未来会重复使用的内容，缓存在分布式的硬盘阵列中，而不是缓存在gpu显存中。缓存命中的部分，DeepSeek 收费 0.1元 每百万 tokens；没命中的部分收费1元 每百万 tokens：</p><p><img src="https://pic3.zhimg.com/v2-805ccf2b7c8c8ce08b17992fe26c83ba_r.jpg" class="large"></p><p>此外，从公开的deepseek官网公开的信息中可以看到：</p><ul><li>DeepSeek V2 提出的 MLA 结构，在提高模型效果的同时，大大压缩了上下文 KV Cache 的大小，使得存储所需要的传输带宽和存储容量均大幅减少，因此可以缓存到低成本的硬盘上。</li><li>缓存系统以 64 tokens 为一个存储单元，不足 64 tokens 的内容不会被缓存</li><li>缓存系统是“尽力而为”，不保证 100% 缓存命中</li><li>缓存不再使用后会自动被清空，时间一般为几个小时到几天</li></ul><p>Prefix Caching只节省了prefill阶段的耗时（也就是降低了TTFT，Time To First Token），并不能节省解码阶段的耗时（也就是TPOT，Time Per Output Token）。如果请求的主要耗时是在解码阶段（例如prompt很短而completion很长），又或者多个不同请求的prompt并没有公共的前缀，那么Prefix Caching就对于整个LLM推理的性能提升帮助不大，需要结合解码阶段的优化技术提高性能。</p><div class="footer"><div class="ant-space css-16cpc8y ant-space-horizontal ant-space-align-center" style="flex-wrap: wrap;"><div class="ant-space-item"><span class="ant-tag css-16cpc8y">KVCache</span></div><div class="ant-space-item"><span class="ant-tag css-16cpc8y">推理加速</span></div><div class="ant-space-item"><span class="ant-tag css-16cpc8y">大语言模型</span></div></div></div><p style="text-align:center;margin-top:100px;">由 <a href="https://circlereader.com" target="_blank">Circle 阅读助手</a> 生成</p></div></div></div></div></body></html>